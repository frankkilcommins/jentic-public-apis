{
  "openapi": "3.1.0",
  "info": {
    "title": "Registry Broker API",
    "version": "0.1.0",
    "description": "Public HTTP endpoints exposed by the Registry Broker for health monitoring and agent discovery.",
    "contact": {
      "name": "Hashgraph Online",
      "url": "https://hol.org"
    },
    "x-jentic-source-url": "https://hol.org/registry/api/v1/openapi.json"
  },
  "servers": [
    {
      "url": "/",
      "description": "Relative to the current host"
    },
    {
      "url": "http://localhost:4000",
      "description": "Local development default"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health probe",
        "description": "Lightweight readiness check used by deployment infrastructure.",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health probe",
        "description": "Lightweight readiness check used by deployment infrastructure.",
        "responses": {
          "200": {
            "description": "Service is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/search": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Keyword search",
        "description": "Perform a keyword search across every indexed agent. Results are ranked by relevance and include pagination metadata.",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Optional free-text query applied to agent name, description and metadata.",
            "schema": {
              "type": "string",
              "example": "babylon prediction markets"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Page number to return (1-indexed). Defaults to 1.",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "example": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of agents to return per page. Defaults to 20. Maximum 500.",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 500,
              "default": 20,
              "example": 10
            }
          },
          {
            "name": "registries",
            "in": "query",
            "description": "Optional comma separated list of registry namespaces used to filter results (for example `openrouter,virtuals`).",
            "schema": {
              "type": "string",
              "example": "erc-8004"
            }
          },
          {
            "name": "adapters",
            "in": "query",
            "description": "Optional comma separated list of adapter identifiers to include (for example `openrouter-adapter,agentverse-adapter`).",
            "schema": {
              "type": "string",
              "example": "erc8004-adapter"
            }
          },
          {
            "name": "adapter",
            "in": "query",
            "description": "Optional adapter identifier used to filter results. Prefer the `adapters` parameter when specifying multiple adapters.",
            "schema": {
              "type": "string",
              "example": "erc8004-adapter"
            }
          },
          {
            "name": "capabilities",
            "in": "query",
            "description": "Optional comma separated list of capability identifiers to match (for example `messaging,search`).",
            "schema": {
              "type": "string",
              "example": "financial-services,analytics"
            }
          },
          {
            "name": "protocols",
            "in": "query",
            "description": "Optional comma separated list of protocol identifiers to match (for example `erc-8004,a2a`).",
            "schema": {
              "type": "string",
              "example": "erc-8004"
            }
          },
          {
            "name": "minTrust",
            "in": "query",
            "description": "Minimum trust score (0-100) required for returned agents.",
            "schema": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "example": 70
            }
          },
          {
            "name": "minSignals",
            "in": "query",
            "description": "Optional comma separated list of trust score signal thresholds formatted as `<signalKey>:<min>` (for example `simple-math.score:1,simple-science.score:1`).",
            "schema": {
              "type": "string",
              "example": "simple-science.score:1"
            }
          },
          {
            "name": "includeAggregations",
            "in": "query",
            "description": "When `false`, omits facets/filter aggregations to reduce latency and payload size (recommended for SSR and lightweight callers).",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "false"
            }
          },
          {
            "name": "verificationStatus",
            "in": "query",
            "description": "Filter results by verification state reported in the agent metadata.",
            "schema": {
              "type": "string",
              "enum": [
                "registered",
                "indexed",
                "pending"
              ],
              "example": "indexed"
            }
          },
          {
            "name": "type",
            "in": "query",
            "description": "Filter by logical agent type. Supported values: `ai-agents`, `mcp-servers`.",
            "schema": {
              "type": "string",
              "enum": [
                "ai-agents",
                "mcp-servers"
              ],
              "example": "ai-agents"
            }
          },
          {
            "name": "verified",
            "in": "query",
            "description": "Set to `true` to return only agents marked as verified.",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "online",
            "in": "query",
            "description": "Set to `true` to return only agents currently reporting availability.",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "Sort order for results. Supported values: `most-recent` (default), `oldest`, `name`, `most-available` (prioritises agents that recently responded with low latency), `trust-score`.",
            "schema": {
              "type": "string",
              "enum": [
                "most-recent",
                "oldest",
                "name",
                "most-available",
                "trust-score"
              ],
              "example": "most-available"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "Override sort direction. Applies to the chosen `sortBy` value. Supported values: `asc`, `desc`.",
            "schema": {
              "type": "string",
              "enum": [
                "asc",
                "desc"
              ],
              "example": "desc"
            }
          },
          {
            "name": "metadata.isFree",
            "in": "query",
            "description": "Optional metadata filter. Setting `metadata.isFree=true` returns only free-tier models. Additional metadata filters follow the `metadata.<key>=value` pattern and accept repeated parameters.",
            "schema": {
              "type": "string",
              "enum": [
                "true",
                "false"
              ],
              "example": "true"
            }
          },
          {
            "name": "metadata.<key>",
            "in": "query",
            "description": "Wildcard metadata filters. Replace `<key>` with any metadata path (for example `metadata.provider=ledger-labs`, `metadata.payments.supported=x402`). Parameters may be repeated to match multiple values.",
            "schema": {
              "type": "string",
              "example": "metadata.nativeNetwork=ethereum-sepolia"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "500": {
            "description": "Search backend failure",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Search"
        ],
        "summary": "Semantic vector search",
        "description": "Run a hybrid semantic/vector search. This endpoint is available when the broker is configured with hybrid storage support.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VectorSearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Semantic search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VectorSearchResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "501": {
            "description": "Vector search not supported on this deployment",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/search/capabilities": {
      "post": {
        "tags": [
          "Search"
        ],
        "summary": "Capability search",
        "description": "Return agents that advertise every requested capability.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CapabilitySearchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Matching agents returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/search/facets": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "List available search facets",
        "description": "Returns the metadata facets that can be used to filter search results. Facets may be scoped to a particular adapter.",
        "parameters": [
          {
            "name": "adapter",
            "in": "query",
            "description": "Optional adapter identifier used to scope the facets.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Facets returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchFacetsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/search/status": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Search backend status",
        "description": "Returns whether hybrid/vector search is currently active along with diagnostic metadata for the vector storage pipeline.",
        "responses": {
          "200": {
            "description": "Status payload returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchStatusResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/registries/{registry}/search": {
      "get": {
        "tags": [
          "Search"
        ],
        "summary": "Registry scoped search",
        "description": "Search for agents inside a specific registry namespace.",
        "parameters": [
          {
            "name": "registry",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "q",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Optional keyword to filter results."
          }
        ],
        "responses": {
          "200": {
            "description": "Search completed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agents/{uaid}": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Agent detail",
        "description": "Retrieve the indexed profile for a specific agent. Includes trust metadata when available.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "description": "Universal Agent Identifier returned by search results.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentDetail"
                }
              }
            }
          },
          "404": {
            "description": "Agent not indexed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agents/{uaid}/feedback": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Agent feedback",
        "description": "List ERC-8004 feedback entries for a specific agent.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "description": "Universal Agent Identifier returned by search results.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "includeRevoked",
            "in": "query",
            "required": false,
            "description": "Include revoked feedback entries when true.",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent feedback returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentFeedbackResponse"
                }
              }
            }
          },
          "400": {
            "description": "Agent does not support feedback",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not indexed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Submit agent feedback",
        "description": "Submit ERC-8004 feedback for a specific agent. Requires an eligible chat session.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "description": "Universal Agent Identifier returned by search results.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentFeedbackSubmissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentFeedbackSubmissionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid feedback payload",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Feedback not eligible for this session",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not indexed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Feedback submission not available",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agents/{uaid}/feedback/eligibility": {
      "post": {
        "tags": [
          "Agents"
        ],
        "summary": "Check feedback eligibility",
        "description": "Verify that a chat session has enough history to submit feedback.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "description": "Universal Agent Identifier returned by search results.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentFeedbackEligibilityRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback eligibility status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentFeedbackEligibilityResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid eligibility payload",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not indexed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/agents/{uaid}/similar": {
      "get": {
        "tags": [
          "Agents"
        ],
        "summary": "Similar agents",
        "description": "Find agents that share capabilities with the referenced agent.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Similar agents returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimilarAgentsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not indexed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/stats": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Platform statistics",
        "description": "Aggregate counters for indexed agents, registries and capabilities.",
        "responses": {
          "200": {
            "description": "Statistics returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatsResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/registries": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Known registries",
        "description": "Return the list of registry namespaces currently indexed by the broker.",
        "responses": {
          "200": {
            "description": "Registries returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistriesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/adapters": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Available adapters",
        "description": "Return the union of adapters discovered in the search backend and those registered in the broker configuration.",
        "responses": {
          "200": {
            "description": "Adapters returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdaptersResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/adapters/details": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Adapter descriptors",
        "description": "Return metadata about every adapter registered with the broker including chat capabilities, supported protocols and runtime status.",
        "responses": {
          "200": {
            "description": "Adapter descriptors returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterDetailsResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/adapters/registry/categories": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Adapter registry categories",
        "description": "List the categories registered in the HCS-21 adapter registry.",
        "responses": {
          "200": {
            "description": "Categories returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterRegistryCategoriesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Registry"
        ],
        "summary": "Create adapter registry category",
        "description": "Create a new HCS-21 adapter registry category and register it on-chain.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAdapterRegistryCategoryRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterRegistryCreateCategoryResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/adapters/registry/adapters": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Adapter registry entries",
        "description": "Search adapters registered in the HCS-21 adapter registry with optional filtering.",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "entity",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "keywords",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "query",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Adapter registry entries returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterRegistryAdaptersResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid search parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Registry"
        ],
        "summary": "Submit adapter registry entry",
        "description": "Queue an HCS-21 adapter submission for on-chain publication. Poll the submission status endpoint to obtain the final registry entry.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitAdapterRegistryAdapterRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Submission accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterRegistrySubmissionAcceptedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/adapters/registry/submissions/{submissionId}": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Adapter submission status",
        "description": "Retrieve the status and result of a queued HCS-21 adapter submission.",
        "parameters": [
          {
            "name": "submissionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Submission status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdapterRegistrySubmissionStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Submission not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/providers": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Provider catalog",
        "description": "List the adapters currently registered with the broker alongside the communication protocols that can be routed through the platform.",
        "responses": {
          "200": {
            "description": "Provider catalog returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProviderCatalogResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/popular": {
      "get": {
        "tags": [
          "Registry"
        ],
        "summary": "Popular searches",
        "description": "Frequently executed search queries collected by the broker cache.",
        "responses": {
          "200": {
            "description": "Popular searches returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PopularSearchResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unexpected server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Create a chat session",
        "operationId": "createChatSession",
        "description": "Establishes a chat session with an agent using either a direct agent URL or a UAID. Optional authentication metadata can be supplied to forward API keys or custom headers to downstream providers (including OpenRouter). Extended chat history and HCS-10/OpenConvAI sessions debit credits from the authenticated ledger account before the session is returned.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatSessionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Ledger authentication required for extended history or credit-backed sessions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits (e.g., extended history retention or HCS-10 chat session fee)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "UAID not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Unable to connect to the agent",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/message": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Send a chat message",
        "operationId": "sendChatMessage",
        "description": "Sends a user message to an agent using an existing session or by providing the agent URL directly. Streaming responses are delivered as server-sent events when `streaming` is true. HCS-10 (OpenConvAI) traffic and OpenRouter adapters debit credits based on the configured per-message pricing and OpenRouter usage metadata.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatMessageRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message processed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatMessageResponse"
                }
              },
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-sent events stream delivering incremental updates when `streaming` is enabled.",
                  "example": "data: {\"type\":\"event\",\"content\":{\"kind\":\"message\"}}\\n\\n"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Ledger authentication required (OpenRouter requests require an authenticated payer)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits for the requested message (HCS-10 fee or metered OpenRouter usage)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Agent interaction failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}": {
      "delete": {
        "tags": [
          "Chat"
        ],
        "summary": "End a chat session",
        "operationId": "endChatSession",
        "description": "Terminates a previously established chat session and clears cached authentication metadata.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "description": "Identifier returned when the chat session was created.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session terminated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatSessionEndResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Chat"
        ],
        "summary": "Update chat session visibility",
        "operationId": "updateChatSessionVisibility",
        "description": "Updates a chat session visibility to public or private. Requires the sender agent to be a session member and to be verified as owned by the authenticated principal.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatSessionVisibilityUpdateRequest"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "description": "Identifier returned when the chat session was created.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatSessionMetadataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Not authorized to update this session",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Chat session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/history": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Retrieve chat history snapshot",
        "operationId": "getChatSessionHistory",
        "description": "Returns the currently stored chat history for a session, including the applied TTL window.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "description": "Identifier returned when the chat session was created.",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "History snapshot returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatHistorySnapshotResponse"
                }
              }
            }
          },
          "400": {
            "description": "sessionId missing or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "History persistence disabled on this deployment",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/meta": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Retrieve chat session metadata",
        "operationId": "getChatSessionMetadata",
        "description": "Returns session metadata including members and visibility. Public sessions are readable without authentication; private sessions require the senderUaid query param plus authentication and ownership verification.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "senderUaid",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Sender UAID used to authorize access to private session metadata."
          }
        ],
        "responses": {
          "200": {
            "description": "Session metadata returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatSessionMetadataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Chat session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/invite": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Invite an agent into a chat session",
        "operationId": "inviteChatSessionMember",
        "description": "Adds an agent UAID as a chat session member. The invite can optionally restrict whether the invitee receives full history or only messages since the invite.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatSessionInviteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invite recorded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatSessionMetadataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Not authorized to invite for this session",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Chat session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/public": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "List public chat sessions",
        "operationId": "listPublicChatSessions",
        "description": "Returns a paginated list of public chat sessions visible to any viewer.",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "cursor",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "q",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Search query applied to sessionId, member UAIDs, and title."
          }
        ],
        "responses": {
          "200": {
            "description": "Public chat sessions returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatPublicSessionsResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to list public sessions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/encryption": {
      "get": {
        "tags": [
          "Chat"
        ],
        "summary": "Get chat encryption status",
        "operationId": "getChatSessionEncryption",
        "description": "Returns the negotiated encryption metadata for a session. Requires chat encryption to be enabled on the broker.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Encryption summary returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionEncryptionStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "sessionId missing or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Chat encryption disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/encryption-handshake": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Submit encryption handshake payload",
        "operationId": "submitChatEncryptionHandshake",
        "description": "Registers an ephemeral key for the requester or responder when establishing an encrypted session.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EncryptionHandshakeSubmission"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Handshake submission recorded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EncryptionHandshakeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing role/keyType/ephemeralPublicKey)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Encrypted session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Chat encryption disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/session/{sessionId}/compact": {
      "post": {
        "tags": [
          "Chat"
        ],
        "summary": "Compact chat history",
        "operationId": "compactChatHistory",
        "description": "Summarizes older entries in the chat history, keeps the most recent entries intact, and debits credits for the summarization cost.",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatHistoryCompactionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "History compacted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatHistoryCompactionResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error (missing sessionId or no history to summarize)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required to run compaction",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits to run compaction",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "502": {
            "description": "Summarization provider failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Compaction disabled or credit system unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/route/{uaid}": {
      "post": {
        "tags": [
          "Routing"
        ],
        "summary": "Send a routed message",
        "description": "Routes a message to the agent referenced by the supplied UAID. The broker will select the correct adapter and translate the payload as required.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UaidRouteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Message routed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UaidRouteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "UAID not known to the broker",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Routing failure",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/resolve/{uaid}": {
      "get": {
        "tags": [
          "Routing"
        ],
        "summary": "Resolve UAID to agent metadata",
        "description": "Returns the cached agent profile associated with a UAID when available.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent resolved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResolveUaidResponse"
                }
              }
            }
          },
          "404": {
            "description": "UAID not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Lookup failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/uaids/validate/{uaid}": {
      "get": {
        "tags": [
          "Routing"
        ],
        "summary": "Validate UAID format",
        "description": "Checks if a UAID is syntactically valid for any adapter configured on the broker and returns supported formatting options.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Validation completed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UaidValidationResponse"
                }
              }
            }
          },
          "500": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/uaids/connections/{uaid}/status": {
      "get": {
        "tags": [
          "Routing"
        ],
        "summary": "Retrieve connection status",
        "description": "Returns connection metadata for a UAID, including adapter and connection identifiers when online.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UaidConnectionStatusResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to load status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/uaids/connections/{uaid}": {
      "delete": {
        "tags": [
          "Routing"
        ],
        "summary": "Close an active UAID connection",
        "description": "Closes the cached connection for the UAID when one exists.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Connection closed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UaidConnectionCloseResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to close connection",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/bridge/federation/registries": {
      "get": {
        "tags": [
          "Federation"
        ],
        "summary": "Federation registries known to the bridge",
        "description": "Lists registries announced through the protocol bridge federation channel when the feature is enabled.",
        "responses": {
          "200": {
            "description": "Registries returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FederationRegistriesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to load registries",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/additional-registries": {
      "get": {
        "tags": [
          "Registration"
        ],
        "summary": "List available additional registries",
        "description": "Returns the catalog of optional registries (and associated networks) that can be selected during agent registration.",
        "responses": {
          "200": {
            "description": "Available registries returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdditionalRegistriesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to enumerate registries",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Additional registries are temporarily unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/quote": {
      "post": {
        "tags": [
          "Registration"
        ],
        "summary": "Estimate registration credits",
        "description": "Returns credit requirements for registering an agent using the supplied HCS-11 profile. When credit tracking is enabled the response includes balance details.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentRegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Quote calculated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationQuoteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid registration payload",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to generate quote",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register": {
      "post": {
        "tags": [
          "Registration"
        ],
        "summary": "Register a new agent",
        "description": "Registers an agent profile with the broker and optional Hedera registries. Requires a valid HCS-11 profile document.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentRegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent registered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentRegistrationResponse"
                }
              }
            }
          },
          "202": {
            "description": "Primary registry published; additional registries are being processed asynchronously. Use the returned `attemptId` with `/api/v1/register/progress/{attemptId}` to poll for completion.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentRegistrationResponse"
                }
              }
            }
          },
          "207": {
            "description": "Primary registry completed, but one or more additional registries failed during this attempt.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentRegistrationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits to complete registration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Registration failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/{uaid}": {
      "put": {
        "tags": [
          "Registration"
        ],
        "summary": "Update a registered agent",
        "description": "Updates the metadata for a previously registered agent while preserving UAID-defining fields.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          },
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentRegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Agent updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentUpdateResponse"
                }
              }
            }
          },
          "202": {
            "description": "Primary registry update accepted; additional registries are being processed asynchronously. Use the returned `attemptId` with `/api/v1/register/progress/{attemptId}` to poll for completion.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentUpdateResponse"
                }
              }
            }
          },
          "207": {
            "description": "Primary registry update completed, but one or more additional registries failed.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentUpdateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits to apply the update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Update failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Profile update service unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Registration"
        ],
        "summary": "Unregister an agent",
        "description": "Removes a self-registered agent from the broker index.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          },
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Agent removed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentDeleteResponse"
                }
              }
            }
          },
          "403": {
            "description": "Agent not eligible for deletion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Deletion failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/status/{uaid}": {
      "get": {
        "tags": [
          "Registration"
        ],
        "summary": "Check registration status",
        "description": "Returns registration metadata for the UAID including profile details when indexed.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Status lookup failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/progress/{attemptId}": {
      "get": {
        "tags": [
          "Registration"
        ],
        "summary": "Retrieve registration attempt progress",
        "description": "Returns the latest status for a registration or update attempt that supplied an attempt identifier in its response.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          },
          {
            "name": "attemptId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Progress record returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationProgressResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "The authenticated caller does not have access to this registration attempt",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Progress record not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to retrieve progress information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Progress tracking is not enabled for this deployment",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/register/{uaid}/openconvai": {
      "post": {
        "tags": [
          "Registration"
        ],
        "summary": "Prepare OpenConvAI registration data",
        "description": "Returns helper instructions and profile data required to onboard a registered agent into OpenConvAI.",
        "parameters": [
          {
            "name": "uaid",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OpenConvaiBridgeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Bridge data prepared",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OpenConvaiBridgeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing operator identifier",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Agent not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to prepare OpenConvAI registration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/credits/providers": {
      "get": {
        "tags": [
          "Credits"
        ],
        "summary": "List configured credit purchase providers",
        "description": "Returns metadata for every payment provider that can be used to purchase registry credits.",
        "responses": {
          "200": {
            "description": "Provider metadata returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreditProvidersResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to load provider information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/credits/balance": {
      "get": {
        "tags": [
          "Credits"
        ],
        "summary": "Fetch the current credit balance for an account",
        "description": "Looks up the credit balance associated with the authenticated user or the optional Hedera account identifier supplied as a query parameter.",
        "parameters": [
          {
            "in": "query",
            "name": "accountId",
            "required": false,
            "description": "Hedera account ID to resolve. Defaults to the authenticated session account when omitted.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Balance lookup succeeded",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreditBalanceResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing or invalid account identifier",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Balance lookup failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/credits/transactions": {
      "get": {
        "tags": [
          "Credits"
        ],
        "summary": "Fetch credit transaction history for an account",
        "description": "Returns recent credit transactions associated with the authenticated user or the optional Hedera account identifier supplied as a query parameter.",
        "parameters": [
          {
            "in": "query",
            "name": "accountId",
            "required": false,
            "description": "Hedera account ID to resolve. Defaults to the authenticated session account when omitted.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Maximum number of transactions to return (max 200).",
            "schema": {
              "type": "integer",
              "example": 50
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "Number of matching transactions to skip.",
            "schema": {
              "type": "integer",
              "example": 0
            }
          },
          {
            "in": "query",
            "name": "type",
            "required": false,
            "description": "Optional transaction type filter.",
            "schema": {
              "type": "string",
              "example": "debit"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "description": "Optional transaction status filter.",
            "schema": {
              "type": "string",
              "example": "completed"
            }
          },
          {
            "in": "query",
            "name": "startDate",
            "required": false,
            "description": "Optional ISO timestamp lower bound (inclusive).",
            "schema": {
              "type": "string",
              "example": "2026-02-08T00:00:00.000Z"
            }
          },
          {
            "in": "query",
            "name": "endDate",
            "required": false,
            "description": "Optional ISO timestamp upper bound (inclusive).",
            "schema": {
              "type": "string",
              "example": "2026-02-09T00:00:00.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction history returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreditTransactionListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "The requested account does not match the authenticated principal",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Transaction lookup failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/credits/payments/hbar/intent": {
      "post": {
        "tags": [
          "Credits"
        ],
        "summary": "Create a Hedera (HBAR) purchase intent",
        "description": "Returns a pre-signed Hedera transfer transaction that moves HBAR from the purchaser to the broker treasury and records the credit amount that will be issued once submitted.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HbarPurchaseIntentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "HBAR purchase intent created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HbarPurchaseIntentResponse"
                }
              }
            }
          },
          "400": {
            "description": "Missing Hedera account or purchase amounts",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to prepare Hedera transaction",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "HBAR purchase support is not configured",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/credits/payments/intent": {
      "post": {
        "tags": [
          "Credits"
        ],
        "summary": "Request a Stripe payment intent for credit purchases",
        "description": "Creates or reuses a Stripe payment intent for purchasing registry credits with a traditional payment method.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StripePurchaseIntentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stripe payment intent created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StripePurchaseIntentResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid payment intent payload",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Stripe payment intent creation failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Stripe is not configured for this broker",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/encryption/keys": {
      "post": {
        "tags": [
          "Encryption"
        ],
        "summary": "Register an encryption key",
        "operationId": "registerEncryptionKey",
        "description": "Registers a long-term public key that may be referenced when establishing encrypted chat sessions. Requires ledger authentication or an API key tied to the target UAID/account.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterEncryptionKeyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Encryption key registered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterEncryptionKeyResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation or normalization error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inscribe/content/config": {
      "get": {
        "tags": [
          "Content"
        ],
        "summary": "Get content inscription service configuration",
        "description": "Returns the current configuration for the content inscription service, including whether the service is enabled, maximum file size limits, and allowed MIME types. Requires ledger authentication (Hedera or EVM wallet).",
        "responses": {
          "200": {
            "description": "Service configuration returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentInscriptionConfigResponse"
                }
              }
            }
          },
          "503": {
            "description": "Content inscription service is disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inscribe/content/quote": {
      "post": {
        "tags": [
          "Content"
        ],
        "summary": "Get a cost quote for inscribing content",
        "description": "Calculates the credit cost for inscribing content on HCS. The quote includes the number of credits required, HBAR equivalent, and an expiration time. Use the returned quoteId when creating an inscription job to lock in the quoted price. Requires ledger authentication (Hedera or EVM wallet).",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContentInscriptionQuoteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Quote calculated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentInscriptionQuoteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (missing content, unsupported MIME type, or file too large)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Content inscription service is disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inscribe/content": {
      "post": {
        "tags": [
          "Content"
        ],
        "summary": "Create a content inscription job",
        "description": "Submits content for inscription on HCS using registry credits. Credits can be purchased with HBAR or via x402 (EVM wallet). The content is processed asynchronously and inscribed to a new topic. Poll the job status endpoint to track progress. Optionally provide a quoteId to use a previously obtained quote.",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ContentInscriptionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Job created and queued for processing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentInscriptionJobStatusResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request (missing content, unsupported MIME type, or file too large)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "402": {
            "description": "Insufficient credits for inscription",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Content inscription service is disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Content"
        ],
        "summary": "List user content inscriptions",
        "description": "Returns a paginated list of content inscription jobs for the authenticated user. Results are ordered by creation date (newest first).",
        "parameters": [
          {
            "name": "x-account-id",
            "in": "header",
            "required": false,
            "description": "Optional ledger account override for credit billing and ownership checks. Defaults to the authenticated account.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Maximum number of results to return (default 20, max 100)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "offset",
            "required": false,
            "description": "Number of results to skip for pagination",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "description": "Filter by job status",
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "in_progress",
                "completed",
                "failed"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of inscription jobs",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentInscriptionListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/inscribe/content/{jobId}": {
      "get": {
        "tags": [
          "Content"
        ],
        "summary": "Get content inscription job status",
        "description": "Returns the current status and details of a content inscription job. Once completed, the response includes the HRL (HCS Resource Locator) for the inscribed content.",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "description": "Unique identifier of the inscription job",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentInscriptionJobStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found or not owned by authenticated user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/skills/config": {
      "get": {
        "tags": [
          "Skills"
        ],
        "summary": "Get skill registry configuration",
        "description": "Returns the current configuration for the skill registry, including whether it is enabled, the network, and registry limits.",
        "responses": {
          "200": {
            "description": "Skill registry configuration returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SkillRegistryConfigResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to load configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/skills/quote": {
      "post": {
        "tags": [
          "Skills"
        ],
        "summary": "Get a cost quote for publishing a skill package",
        "description": "Calculates the credit cost for publishing a skill package. The package is stored on-chain using HCS-1 for file content and HCS-2 for directory/package indexing.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SkillRegistryQuoteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Quote calculated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SkillRegistryQuoteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not skill owner)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Skill registry is disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/skills/publish": {
      "post": {
        "tags": [
          "Skills"
        ],
        "summary": "Publish a skill package",
        "description": "Publishes a skill package using registry credits. The request is processed asynchronously; poll the job status endpoint for completion details.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SkillRegistryPublishRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Publish job created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SkillRegistryPublishJobResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request or insufficient credits",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden (not skill owner)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Skill registry is disabled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/skills/jobs/{jobId}": {
      "get": {
        "tags": [
          "Skills"
        ],
        "summary": "Get skill publish job status",
        "description": "Returns the current status and result of a skill publish job. Once completed, the response includes the directory/topic ids and file HRLs.",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "description": "Unique identifier of the publish job",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "in": "query",
            "name": "accountId",
            "required": false,
            "description": "Optional account id used to authorize status checks when using static API keys.",
            "schema": {
              "type": "string",
              "example": "0.0.123456"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SkillRegistryJobStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found or not owned by requester",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/skills": {
      "get": {
        "tags": [
          "Skills"
        ],
        "summary": "Query published skills",
        "description": "Queries the broker index of published skills. Use query parameters for filtering; this endpoint does not use name/version path params.",
        "parameters": [
          {
            "in": "query",
            "name": "name",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "version",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 50,
              "default": 20
            }
          },
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "includeFiles",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Published skills returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SkillRegistryListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Skill registry is unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "required": [
          "status",
          "timestamp"
        ],
        "properties": {
          "status": {
            "type": "string",
            "example": "ok"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            }
          }
        },
        "additionalProperties": false
      },
      "ValidationError": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "field": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "ValidationErrorResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ErrorResponse"
          },
          {
            "properties": {
              "error": {
                "example": "Validation failed"
              }
            }
          }
        ]
      },
      "AgentSummary": {
        "type": "object",
        "required": [
          "uaid",
          "name",
          "registry"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Internal identifier for the agent."
          },
          "uaid": {
            "type": "string",
            "description": "Universal Agent Identifier."
          },
          "registry": {
            "type": "string",
            "description": "Registry namespace the agent originated from."
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "capabilities": {
            "type": "array",
            "description": "Capabilities advertised by the agent.",
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            }
          },
          "protocols": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "endpoints": {
            "type": "object",
            "description": "Known endpoints for interacting with the agent.",
            "properties": {
              "primary": {
                "type": "string",
                "format": "uri"
              },
              "api": {
                "type": "string",
                "format": "uri"
              },
              "websocket": {
                "type": "string",
                "format": "uri"
              },
              "grpc": {
                "type": "string",
                "format": "uri"
              },
              "rest": {
                "type": "string",
                "format": "uri"
              }
            },
            "additionalProperties": true
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          },
          "lastSeen": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": true,
        "example": {
          "id": "erc8004-11155111-1538",
          "uaid": "uaid:aid:7uGHL6U2GYw95VbZ3jvy5P11qW52MrojpFXozmBy8cFuHk8T1jRw6trVpx1zwS4Y78;uid=11155111:1538;registry=erc-8004;proto=erc-8004;nativeId=11155111:1538",
          "registry": "erc-8004",
          "name": "Babylon Prediction Markets",
          "description": "Indexes Babylons ERC-8004 prediction market agents registered on Ethereum Sepolia.",
          "capabilities": [
            "financial-services",
            "analytics"
          ],
          "protocols": [
            "erc-8004"
          ],
          "endpoints": {
            "primary": "https://agents.babylon.markets/.well-known/agent.json",
            "rest": "https://api.babylon.markets/v1"
          },
          "metadata": {
            "nativeId": "11155111:1538",
            "nativeNetwork": "ethereum-sepolia",
            "payments": {
              "supported": [
                "x402"
              ],
              "protocols": {
                "x402": {
                  "paymentNetwork": "base",
                  "paymentToken": "USDC",
                  "priceUsdc": 0.05
                }
              }
            },
            "availabilityStatus": "online",
            "availabilityLatencyMs": 420
          },
          "lastSeen": "2025-03-14T12:32:11.000Z"
        }
      },
      "AgentDetail": {
        "allOf": [
          {
            "$ref": "#/components/schemas/AgentSummary"
          },
          {
            "properties": {
              "profile": {
                "type": "object",
                "description": "HCS-11 profile document recorded for the agent.",
                "additionalProperties": true
              }
            }
          }
        ]
      },
      "AgentFeedbackSummary": {
        "type": "object",
        "required": [
          "averageScore",
          "totalFeedbacks"
        ],
        "properties": {
          "averageScore": {
            "type": "number",
            "example": 87.5
          },
          "totalFeedbacks": {
            "type": "integer",
            "example": 12
          },
          "registry": {
            "type": "string",
            "example": "erc-8004"
          },
          "network": {
            "type": "string",
            "example": "eip155:11155111"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AgentFeedbackEntry": {
        "type": "object",
        "required": [
          "registry",
          "agentId",
          "client",
          "score",
          "revoked"
        ],
        "properties": {
          "registry": {
            "type": "string",
            "example": "erc-8004"
          },
          "network": {
            "type": "string",
            "example": "eip155:11155111"
          },
          "agentId": {
            "type": "integer",
            "example": 114
          },
          "client": {
            "type": "string",
            "example": "0x1234...abcd"
          },
          "score": {
            "type": "number",
            "example": 90
          },
          "tag1": {
            "type": "string",
            "nullable": true
          },
          "tag2": {
            "type": "string",
            "nullable": true
          },
          "revoked": {
            "type": "boolean",
            "example": false
          },
          "feedbackIndex": {
            "type": "integer",
            "nullable": true
          },
          "fileUri": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "fileHash": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "AgentFeedbackResponse": {
        "type": "object",
        "required": [
          "uaid",
          "summary",
          "entries"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "summary": {
            "$ref": "#/components/schemas/AgentFeedbackSummary"
          },
          "entries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentFeedbackEntry"
            }
          }
        }
      },
      "AgentFeedbackEligibilityRequest": {
        "type": "object",
        "required": [
          "sessionId"
        ],
        "properties": {
          "sessionId": {
            "type": "string",
            "example": "session-123"
          }
        }
      },
      "AgentFeedbackEligibilityResponse": {
        "type": "object",
        "required": [
          "uaid",
          "sessionId",
          "eligible",
          "messageCount",
          "minimumMessages"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "sessionId": {
            "type": "string"
          },
          "eligible": {
            "type": "boolean",
            "example": true
          },
          "messageCount": {
            "type": "integer",
            "example": 4
          },
          "minimumMessages": {
            "type": "integer",
            "example": 3
          },
          "reason": {
            "type": "string",
            "nullable": true
          },
          "onchain": {
            "type": "object",
            "nullable": true,
            "required": [
              "eligible"
            ],
            "properties": {
              "eligible": {
                "type": "boolean"
              },
              "reason": {
                "type": "string",
                "nullable": true
              },
              "estimatedCredits": {
                "type": "number",
                "nullable": true
              },
              "usdEstimate": {
                "type": "number",
                "nullable": true
              },
              "nativeFeeEstimate": {
                "type": "number",
                "nullable": true
              }
            }
          }
        }
      },
      "AgentFeedbackSubmissionRequest": {
        "type": "object",
        "required": [
          "sessionId",
          "score"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "score": {
            "type": "number",
            "example": 92
          },
          "tag1": {
            "type": "string",
            "nullable": true
          },
          "tag2": {
            "type": "string",
            "nullable": true
          },
          "fileUri": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "fileHash": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "AgentFeedbackSubmissionResponse": {
        "type": "object",
        "required": [
          "uaid",
          "registry",
          "agentId",
          "score",
          "submittedAt"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "registry": {
            "type": "string",
            "example": "erc-8004"
          },
          "network": {
            "type": "string",
            "nullable": true
          },
          "agentId": {
            "type": "integer",
            "example": 114
          },
          "score": {
            "type": "number",
            "example": 92
          },
          "tag1": {
            "type": "string",
            "nullable": true
          },
          "tag2": {
            "type": "string",
            "nullable": true
          },
          "fileUri": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "fileHash": {
            "type": "string",
            "nullable": true
          },
          "feedbackIndex": {
            "type": "integer",
            "nullable": true
          },
          "transactionHash": {
            "type": "string",
            "nullable": true
          },
          "signature": {
            "type": "string",
            "nullable": true
          },
          "submittedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SearchResponse": {
        "type": "object",
        "required": [
          "hits",
          "total"
        ],
        "properties": {
          "hits": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentSummary"
            }
          },
          "total": {
            "type": "integer",
            "minimum": 0
          },
          "page": {
            "type": "integer",
            "minimum": 1
          },
          "limit": {
            "type": "integer",
            "minimum": 1
          }
        },
        "example": {
          "hits": [
            {
              "id": "erc8004-11155111-1538",
              "uaid": "uaid:aid:7uGHL6U2GYw95VbZ3jvy5P11qW52MrojpFXozmBy8cFuHk8T1jRw6trVpx1zwS4Y78;uid=11155111:1538;registry=erc-8004;proto=erc-8004;nativeId=11155111:1538",
              "registry": "erc-8004",
              "name": "Babylon Prediction Markets",
              "description": "Indexes Babylons ERC-8004 prediction market agents registered on Ethereum Sepolia.",
              "capabilities": [
                "financial-services",
                "analytics"
              ],
              "protocols": [
                "erc-8004"
              ],
              "endpoints": {
                "primary": "https://agents.babylon.markets/.well-known/agent.json",
                "rest": "https://api.babylon.markets/v1"
              },
              "metadata": {
                "nativeId": "11155111:1538",
                "nativeNetwork": "ethereum-sepolia",
                "payments": {
                  "supported": [
                    "x402"
                  ],
                  "protocols": {
                    "x402": {
                      "paymentNetwork": "base",
                      "paymentToken": "USDC",
                      "priceUsdc": 0.05
                    }
                  }
                },
                "availabilityStatus": "online",
                "availabilityLatencyMs": 420
              },
              "lastSeen": "2025-03-14T12:32:11.000Z"
            }
          ],
          "total": 128,
          "page": 1,
          "limit": 10
        }
      },
      "SearchFacet": {
        "type": "object",
        "required": [
          "key",
          "label",
          "type"
        ],
        "properties": {
          "key": {
            "type": "string",
            "description": "Metadata key that can be supplied as `metadata.<key>=value` when filtering."
          },
          "label": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "string",
              "boolean",
              "number"
            ]
          },
          "adapters": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Adapters that expose this facet. When omitted the facet is global."
          },
          "options": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "value",
                "label"
              ],
              "properties": {
                "value": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "number"
                    },
                    {
                      "type": "boolean"
                    }
                  ]
                },
                "label": {
                  "type": "string"
                }
              }
            },
            "description": "Optional predefined values that may be presented to end users."
          }
        },
        "additionalProperties": false
      },
      "SearchFacetsResponse": {
        "type": "object",
        "required": [
          "facets"
        ],
        "properties": {
          "facets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SearchFacet"
            }
          }
        },
        "additionalProperties": false
      },
      "CapabilitySearchRequest": {
        "type": "object",
        "required": [
          "capabilities"
        ],
        "properties": {
          "capabilities": {
            "type": "array",
            "description": "List of capabilities required in the result set.",
            "items": {
              "type": "string"
            },
            "minItems": 1
          }
        },
        "additionalProperties": false
      },
      "VectorSearchFilter": {
        "type": "object",
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "financial-services"
            ]
          },
          "type": {
            "type": "string",
            "enum": [
              "ai-agents",
              "mcp-servers"
            ]
          },
          "registry": {
            "type": "string",
            "example": "erc-8004"
          },
          "protocols": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "erc-8004"
            ]
          },
          "adapter": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "erc8004-adapter"
            ]
          }
        },
        "additionalProperties": false
      },
      "VectorSearchRequest": {
        "type": "object",
        "required": [
          "query"
        ],
        "properties": {
          "query": {
            "type": "string",
            "description": "User provided search text.",
            "example": "Prediction market monitor for Ethereum Sepolia"
          },
          "filter": {
            "$ref": "#/components/schemas/VectorSearchFilter"
          },
          "limit": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 10,
            "example": 5
          },
          "offset": {
            "type": "integer",
            "minimum": 0,
            "default": 0,
            "example": 0
          }
        },
        "additionalProperties": false,
        "example": {
          "query": "Babylon prediction market alerts",
          "limit": 5,
          "filter": {
            "registry": "erc-8004",
            "protocols": [
              "erc-8004",
              "a2a"
            ],
            "capabilities": [
              "financial-services"
            ],
            "adapter": [
              "erc8004-adapter"
            ],
            "type": "ai-agents"
          }
        }
      },
      "VectorSearchHit": {
        "type": "object",
        "required": [
          "agent"
        ],
        "properties": {
          "agent": {
            "$ref": "#/components/schemas/AgentSummary"
          },
          "score": {
            "type": "number",
            "description": "Similarity score supplied by the vector store."
          },
          "highlights": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },
      "VectorSearchResponse": {
        "type": "object",
        "required": [
          "hits",
          "total",
          "took"
        ],
        "properties": {
          "hits": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/VectorSearchHit"
            }
          },
          "total": {
            "type": "integer",
            "minimum": 0
          },
          "took": {
            "type": "number",
            "description": "Time spent servicing the request in milliseconds."
          },
          "credits_used": {
            "type": "integer",
            "minimum": 0,
            "description": "Credits consumed when credit tracking is enabled."
          }
        },
        "example": {
          "hits": [
            {
              "agent": {
                "id": "erc8004-11155111-1538",
                "uaid": "uaid:aid:7uGHL6U2GYw95VbZ3jvy5P11qW52MrojpFXozmBy8cFuHk8T1jRw6trVpx1zwS4Y78;uid=11155111:1538;registry=erc-8004;proto=erc-8004;nativeId=11155111:1538",
                "registry": "erc-8004",
                "name": "Babylon Prediction Markets",
                "description": "Indexes Babylons ERC-8004 prediction market agents registered on Ethereum Sepolia.",
                "capabilities": [
                  "financial-services",
                  "analytics"
                ],
                "protocols": [
                  "erc-8004"
                ],
                "endpoints": {
                  "primary": "https://agents.babylon.markets/.well-known/agent.json",
                  "rest": "https://api.babylon.markets/v1"
                },
                "metadata": {
                  "nativeId": "11155111:1538",
                  "nativeNetwork": "ethereum-sepolia",
                  "payments": {
                    "supported": [
                      "x402"
                    ],
                    "protocols": {
                      "x402": {
                        "paymentNetwork": "base",
                        "paymentToken": "USDC",
                        "priceUsdc": 0.05
                      }
                    }
                  },
                  "availabilityStatus": "online",
                  "availabilityLatencyMs": 420
                },
                "lastSeen": "2025-03-14T12:32:11.000Z"
              },
              "score": 0.8739,
              "highlights": {
                "description": [
                  "Babylon Prediction Markets indexes ERC-8004 agents registered on Ethereum Sepolia."
                ]
              }
            }
          ],
          "total": 42,
          "took": 18,
          "credits_used": 0
        }
      },
      "VectorStatus": {
        "type": "object",
        "required": [
          "enabled",
          "healthy",
          "mode",
          "lastUpdated"
        ],
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "healthy": {
            "type": "boolean"
          },
          "mode": {
            "type": "string",
            "enum": [
              "disabled",
              "initializing",
              "healthy",
              "degraded",
              "error"
            ]
          },
          "lastUpdated": {
            "type": "string",
            "format": "date-time"
          },
          "details": {
            "type": "object",
            "additionalProperties": true,
            "description": "Diagnostic metadata such as Qdrant and RocksDB endpoints."
          },
          "lastError": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string"
              },
              "stack": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              }
            },
            "additionalProperties": false
          }
        },
        "additionalProperties": false,
        "example": {
          "enabled": true,
          "healthy": false,
          "mode": "degraded",
          "lastUpdated": "2025-11-25T17:42:11.201Z",
          "details": {
            "qdrantUrl": "http://qdrant:6333",
            "rocksdbUrl": "rocksdb-sidecar:50051",
            "vectorSize": 768
          },
          "lastError": {
            "message": "Vector DB health check returned unhealthy status",
            "timestamp": "2025-11-25T17:42:11.198Z"
          }
        }
      },
      "SearchStatusResponse": {
        "type": "object",
        "required": [
          "storageMode",
          "vectorStatus"
        ],
        "properties": {
          "storageMode": {
            "type": "string",
            "enum": [
              "hybrid",
              "fallback"
            ],
            "description": "Indicates whether the broker is currently serving hybrid (vector-enabled) or fallback (RocksDB-only) search."
          },
          "vectorStatus": {
            "$ref": "#/components/schemas/VectorStatus"
          }
        },
        "additionalProperties": false
      },
      "SimilarAgentsResponse": {
        "type": "object",
        "required": [
          "agents"
        ],
        "properties": {
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AgentSummary"
            }
          }
        }
      },
      "TrustScore": {
        "type": "object",
        "required": [
          "score",
          "attestationCount",
          "lastUpdated"
        ],
        "properties": {
          "score": {
            "type": "number"
          },
          "weightedScore": {
            "type": "number"
          },
          "rawScore": {
            "type": "number"
          },
          "attestationCount": {
            "type": "integer",
            "minimum": 0
          },
          "lastUpdated": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "StatsResponse": {
        "type": "object",
        "required": [
          "totalAgents",
          "registries",
          "capabilities",
          "status",
          "lastUpdate"
        ],
        "properties": {
          "totalAgents": {
            "type": "integer",
            "minimum": 0
          },
          "registries": {
            "type": "object",
            "additionalProperties": {
              "type": "integer",
              "minimum": 0
            }
          },
          "capabilities": {
            "type": "object",
            "additionalProperties": {
              "type": "integer",
              "minimum": 0
            }
          },
          "status": {
            "type": "string"
          },
          "lastUpdate": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "RegistriesResponse": {
        "type": "object",
        "required": [
          "registries"
        ],
        "properties": {
          "registries": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "PopularSearchResponse": {
        "type": "object",
        "required": [
          "searches"
        ],
        "properties": {
          "searches": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "query",
                "count"
              ],
              "properties": {
                "query": {
                  "type": "string"
                },
                "count": {
                  "type": "integer",
                  "minimum": 0
                }
              }
            }
          }
        }
      },
      "ChatSessionAuth": {
        "type": "object",
        "description": "Authentication metadata that can be forwarded to downstream chat providers.",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "bearer",
              "basic",
              "header",
              "apiKey"
            ],
            "description": "Helper used to derive standard Authorization headers."
          },
          "token": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "headerName": {
            "type": "string"
          },
          "headerValue": {
            "type": "string"
          },
          "headers": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Arbitrary headers to merge into each downstream request."
          }
        },
        "additionalProperties": false
      },
      "ChatSessionRequest": {
        "type": "object",
        "properties": {
          "agentUrl": {
            "type": "string",
            "description": "Direct URL to an agent endpoint (A2A, NANDA, or OpenRouter)."
          },
          "uaid": {
            "type": "string",
            "description": "Universal Agent Identifier to resolve before starting a session."
          },
          "auth": {
            "$ref": "#/components/schemas/ChatSessionAuth"
          },
          "historyTtlSeconds": {
            "type": "number",
            "description": "Desired retention period for chat history in seconds (must be within configured limits)."
          },
          "senderUaid": {
            "type": "string",
            "description": "Optional UAID of the requesting agent (used for encrypted session negotiation and UAID-derived transports like XMTP)."
          },
          "transport": {
            "type": "string",
            "description": "Optional transport hint for UAID-based routing (for example: xmtp).",
            "enum": [
              "xmtp",
              "moltbook",
              "http",
              "a2a",
              "acp"
            ]
          },
          "encryptionRequested": {
            "type": "boolean",
            "description": "When true the broker attempts to establish an encrypted session if both parties registered keys."
          }
        },
        "additionalProperties": false,
        "anyOf": [
          {
            "required": [
              "agentUrl"
            ]
          },
          {
            "required": [
              "uaid"
            ]
          }
        ]
      },
      "ChatAgentProfile": {
        "type": "object",
        "required": [
          "name",
          "description",
          "capabilities"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "capabilities": {
            "type": "object",
            "additionalProperties": true
          },
          "skills": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Additional metadata returned by the downstream provider."
          }
        }
      },
      "ChatHistoryEntry": {
        "type": "object",
        "required": [
          "messageId",
          "role",
          "content",
          "timestamp"
        ],
        "properties": {
          "messageId": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "agent"
            ]
          },
          "content": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Optional metadata associated with the entry."
          },
          "cipherEnvelope": {
            "description": "Opaque ciphertext payload persisted when the session is encrypted.",
            "$ref": "#/components/schemas/CipherEnvelope"
          }
        }
      },
      "ChatInviteHistoryScope": {
        "type": "string",
        "enum": [
          "all",
          "since_invite"
        ],
        "description": "History scope applied to an invited agent. 'since_invite' restricts the invitee to only messages created after the invite timestamp."
      },
      "ChatSessionVisibility": {
        "type": "string",
        "enum": [
          "private",
          "public"
        ],
        "description": "Chat session visibility. Public sessions are discoverable and readable by anyone; private sessions are not listed."
      },
      "ChatSessionMember": {
        "type": "object",
        "required": [
          "uaid",
          "invitedAt",
          "historyScope"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "invitedAt": {
            "type": "string",
            "format": "date-time"
          },
          "historyScope": {
            "$ref": "#/components/schemas/ChatInviteHistoryScope"
          }
        }
      },
      "ChatSessionMetadataResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "visibility",
          "members",
          "createdAt",
          "updatedAt",
          "lastActivityAt"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "visibility": {
            "$ref": "#/components/schemas/ChatSessionVisibility"
          },
          "members": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatSessionMember"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time"
          },
          "title": {
            "type": "string"
          },
          "lastMessagePreview": {
            "type": "string"
          }
        }
      },
      "ChatSessionVisibilityUpdateRequest": {
        "type": "object",
        "required": [
          "senderUaid",
          "visibility"
        ],
        "properties": {
          "senderUaid": {
            "type": "string",
            "description": "Sender UAID that must be a member of the session."
          },
          "visibility": {
            "$ref": "#/components/schemas/ChatSessionVisibility"
          }
        },
        "additionalProperties": false
      },
      "ChatSessionInviteRequest": {
        "type": "object",
        "required": [
          "senderUaid",
          "uaid"
        ],
        "properties": {
          "senderUaid": {
            "type": "string",
            "description": "Sender UAID that must be a member of the session."
          },
          "uaid": {
            "type": "string",
            "description": "UAID of the agent being invited."
          },
          "historyScope": {
            "$ref": "#/components/schemas/ChatInviteHistoryScope"
          }
        },
        "additionalProperties": false
      },
      "ChatPublicSessionSummary": {
        "type": "object",
        "required": [
          "sessionId",
          "createdAt",
          "lastActivityAt",
          "memberUaids"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time"
          },
          "memberUaids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "title": {
            "type": "string"
          },
          "lastMessagePreview": {
            "type": "string"
          }
        }
      },
      "ChatPublicSessionsResponse": {
        "type": "object",
        "required": [
          "sessions"
        ],
        "properties": {
          "sessions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatPublicSessionSummary"
            }
          },
          "nextCursor": {
            "type": "string",
            "description": "Cursor token to request the next page of public sessions."
          }
        }
      },
      "ChatSessionResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "agent",
          "history"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "uaid": {
            "type": "string",
            "nullable": true
          },
          "agent": {
            "$ref": "#/components/schemas/ChatAgentProfile"
          },
          "history": {
            "type": "array",
            "description": "Chronological conversation entries associated with the session.",
            "items": {
              "$ref": "#/components/schemas/ChatHistoryEntry"
            }
          },
          "historyTtlSeconds": {
            "type": "number",
            "nullable": true,
            "description": "Number of seconds chat history will be retained for this session."
          },
          "encryption": {
            "description": "Encryption capabilities negotiated for this session when chat encryption is enabled.",
            "$ref": "#/components/schemas/SessionEncryptionSummary"
          }
        }
      },
      "ChatHistorySnapshotResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "history"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "history": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatHistoryEntry"
            }
          },
          "historyTtlSeconds": {
            "type": "number",
            "description": "Current retention window in seconds for this session."
          }
        }
      },
      "ChatHistoryCompactionRequest": {
        "type": "object",
        "properties": {
          "preserveEntries": {
            "type": "number",
            "minimum": 0,
            "description": "Number of most recent entries to leave unmodified when compacting history."
          }
        }
      },
      "ChatHistoryCompactionResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "history",
          "summaryEntry"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "history": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatHistoryEntry"
            }
          },
          "summaryEntry": {
            "$ref": "#/components/schemas/ChatHistoryEntry"
          },
          "preservedEntries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatHistoryEntry"
            },
            "description": "Entries that were kept verbatim after compaction."
          },
          "historyTtlSeconds": {
            "type": "number",
            "description": "Current retention window in seconds for this session."
          },
          "creditsDebited": {
            "type": "number",
            "description": "Credits charged for the compaction operation."
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Additional details such as summarized entry counts or token usage."
          }
        }
      },
      "ChatMessageRequest": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "Existing chat session identifier. Required when agentUrl is omitted."
          },
          "agentUrl": {
            "type": "string",
            "description": "Agent endpoint to contact when no session is provided."
          },
          "uaid": {
            "type": "string",
            "description": "UAID to route through when message should leverage registry routing."
          },
          "message": {
            "type": "string"
          },
          "streaming": {
            "type": "boolean",
            "default": false,
            "description": "When true the response will be streamed via server-sent events."
          },
          "auth": {
            "$ref": "#/components/schemas/ChatSessionAuth"
          },
          "senderUaid": {
            "type": "string",
            "description": "Optional UAID of the requesting agent (used for encrypted sessions and UAID-derived transports like XMTP)."
          },
          "transport": {
            "type": "string",
            "description": "Optional transport hint for UAID-based routing (for example: xmtp).",
            "enum": [
              "xmtp",
              "moltbook",
              "http",
              "a2a",
              "acp"
            ]
          },
          "cipherEnvelope": {
            "description": "Envelope containing ciphertext and encrypted key shares for end-to-end encrypted chats.",
            "$ref": "#/components/schemas/CipherEnvelope"
          }
        },
        "additionalProperties": false,
        "anyOf": [
          {
            "required": [
              "sessionId"
            ]
          },
          {
            "required": [
              "agentUrl"
            ]
          },
          {
            "required": [
              "uaid"
            ]
          }
        ]
      },
      "ChatMessageResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "message",
          "timestamp"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "uaid": {
            "type": "string",
            "nullable": true
          },
          "message": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "rawResponse": {
            "description": "Raw response payload returned by routed UAID providers when available.",
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "null"
              },
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {}
              }
            ]
          },
          "history": {
            "type": "array",
            "description": "Updated session history when the request is associated with a managed session.",
            "items": {
              "$ref": "#/components/schemas/ChatHistoryEntry"
            }
          },
          "historyTtlSeconds": {
            "type": "number",
            "nullable": true,
            "description": "Current retention window in seconds for the session history."
          },
          "encrypted": {
            "type": "boolean",
            "description": "Indicates the broker stored ciphertext rather than plaintext content for this call."
          }
        }
      },
      "ChatSessionEndResponse": {
        "type": "object",
        "required": [
          "message",
          "sessionId"
        ],
        "properties": {
          "message": {
            "type": "string",
            "example": "Session ended"
          },
          "sessionId": {
            "type": "string"
          }
        }
      },
      "CipherEnvelopeRecipient": {
        "type": "object",
        "required": [
          "encryptedShare"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "ledgerAccountId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "encryptedShare": {
            "type": "string",
            "description": "Opaque, implementation-reserved per-recipient field. No usable encryption key material is stored here."
          }
        },
        "additionalProperties": false
      },
      "CipherEnvelope": {
        "type": "object",
        "required": [
          "algorithm",
          "ciphertext",
          "nonce",
          "recipients"
        ],
        "properties": {
          "algorithm": {
            "type": "string",
            "example": "aes-256-gcm"
          },
          "ciphertext": {
            "type": "string",
            "description": "Base64-encoded ciphertext (may include the auth tag)."
          },
          "nonce": {
            "type": "string",
            "description": "Base64-encoded IV/nonce used for encryption."
          },
          "associatedData": {
            "type": "string",
            "nullable": true,
            "description": "Optional base64-encoded AAD bound to the ciphertext."
          },
          "keyLocator": {
            "type": "object",
            "properties": {
              "sessionId": {
                "type": "string"
              },
              "revision": {
                "type": "integer"
              }
            }
          },
          "recipients": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/components/schemas/CipherEnvelopeRecipient"
            }
          }
        },
        "additionalProperties": false
      },
      "SessionEncryptionPeerSummary": {
        "type": "object",
        "required": [
          "keyType",
          "publicKey"
        ],
        "properties": {
          "keyType": {
            "type": "string",
            "example": "secp256k1"
          },
          "publicKey": {
            "type": "string",
            "description": "Hex-encoded compressed public key."
          },
          "uaid": {
            "type": "string"
          },
          "ledgerAccountId": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "SessionEncryptionSummary": {
        "type": "object",
        "required": [
          "enabled",
          "algorithm",
          "requireCiphertext"
        ],
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "algorithm": {
            "type": "string",
            "example": "aes-gcm"
          },
          "requireCiphertext": {
            "type": "boolean",
            "description": "Indicates whether plaintext submissions are rejected for this session."
          },
          "requester": {
            "$ref": "#/components/schemas/SessionEncryptionPeerSummary",
            "nullable": true
          },
          "responder": {
            "$ref": "#/components/schemas/SessionEncryptionPeerSummary",
            "nullable": true
          },
          "handshake": {
            "$ref": "#/components/schemas/EncryptionHandshakeRecord",
            "nullable": true
          }
        }
      },
      "SessionEncryptionStatusResponse": {
        "type": "object",
        "required": [
          "sessionId"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "encryption": {
            "$ref": "#/components/schemas/SessionEncryptionSummary",
            "nullable": true
          }
        }
      },
      "EncryptionHandshakeSubmission": {
        "type": "object",
        "required": [
          "role",
          "keyType",
          "ephemeralPublicKey"
        ],
        "properties": {
          "role": {
            "type": "string",
            "enum": [
              "requester",
              "responder"
            ]
          },
          "keyType": {
            "type": "string",
            "example": "secp256k1"
          },
          "ephemeralPublicKey": {
            "type": "string",
            "description": "Hex-encoded compressed ephemeral public key."
          },
          "longTermPublicKey": {
            "type": "string",
            "description": "Optional hex-encoded long-term key when not pre-registered."
          },
          "uaid": {
            "type": "string"
          },
          "userId": {
            "type": "string"
          },
          "ledgerAccountId": {
            "type": "string"
          },
          "signature": {
            "type": "string",
            "description": "Optional proof binding the ephemeral key to an authenticated identity."
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "additionalProperties": false
      },
      "EncryptionHandshakeRecord": {
        "type": "object",
        "required": [
          "sessionId",
          "algorithm",
          "status",
          "createdAt",
          "expiresAt"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "algorithm": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "complete"
            ]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "expiresAt": {
            "type": "number",
            "description": "Unix timestamp (ms) when the record expires."
          },
          "requester": {
            "type": "object",
            "properties": {
              "submittedAt": {
                "type": "string",
                "format": "date-time"
              }
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/EncryptionHandshakeSubmission"
              }
            ],
            "nullable": true
          },
          "responder": {
            "type": "object",
            "properties": {
              "submittedAt": {
                "type": "string",
                "format": "date-time"
              }
            },
            "allOf": [
              {
                "$ref": "#/components/schemas/EncryptionHandshakeSubmission"
              }
            ],
            "nullable": true
          }
        }
      },
      "EncryptionHandshakeResponse": {
        "type": "object",
        "required": [
          "sessionId",
          "handshake"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "handshake": {
            "$ref": "#/components/schemas/EncryptionHandshakeRecord"
          }
        }
      },
      "RegisterEncryptionKeyRequest": {
        "type": "object",
        "required": [
          "keyType",
          "publicKey"
        ],
        "properties": {
          "keyType": {
            "type": "string",
            "enum": [
              "secp256k1",
              "ed25519",
              "x25519"
            ]
          },
          "publicKey": {
            "type": "string",
            "description": "Hex-encoded public key."
          },
          "uaid": {
            "type": "string",
            "description": "UAID that should be associated with the encryption key."
          },
          "ledgerAccountId": {
            "type": "string"
          },
          "ledgerNetwork": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        },
        "additionalProperties": false
      },
      "RegisterEncryptionKeyResponse": {
        "type": "object",
        "required": [
          "id",
          "keyType",
          "publicKey",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "keyType": {
            "type": "string"
          },
          "publicKey": {
            "type": "string"
          },
          "uaid": {
            "type": "string",
            "nullable": true
          },
          "ledgerAccountId": {
            "type": "string",
            "nullable": true
          },
          "ledgerNetwork": {
            "type": "string",
            "nullable": true
          },
          "userId": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "AdaptersResponse": {
        "type": "object",
        "required": [
          "adapters"
        ],
        "properties": {
          "adapters": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "additionalProperties": false
      },
      "AdapterChatProfile": {
        "type": "object",
        "required": [
          "supportsChat"
        ],
        "properties": {
          "supportsChat": {
            "type": "boolean",
            "description": "Whether the adapter can relay chat messages through the broker."
          },
          "delivery": {
            "type": "string",
            "description": "Delivery pattern used by the adapter.",
            "enum": [
              "relay",
              "mailbox",
              "direct",
              "discovery"
            ]
          },
          "transport": {
            "type": "string",
            "description": "Transport or protocol used for chat delivery (for example `https`, `websocket`)."
          },
          "streaming": {
            "type": "boolean",
            "description": "Indicates whether the adapter supports streaming responses."
          },
          "requiresAuth": {
            "type": "array",
            "description": "List of downstream authentication schemes required by the adapter.",
            "items": {
              "type": "string"
            }
          },
          "notes": {
            "type": "string",
            "description": "Additional notes about the chat integration."
          }
        },
        "additionalProperties": false
      },
      "AdapterCapabilities": {
        "type": "object",
        "required": [
          "discovery",
          "routing",
          "communication",
          "translation",
          "protocols"
        ],
        "properties": {
          "discovery": {
            "type": "boolean",
            "description": "Adapter can discover or index agents from the upstream registry."
          },
          "routing": {
            "type": "boolean",
            "description": "Adapter can route incoming UAID messages to downstream agents."
          },
          "communication": {
            "type": "boolean",
            "description": "Adapter supports two-way communication with downstream agents."
          },
          "translation": {
            "type": "boolean",
            "description": "Adapter translates between downstream protocols and ASI chat."
          },
          "protocols": {
            "type": "array",
            "description": "Protocols implemented by the adapter (for example `erc-8004`, `mcp`).",
            "items": {
              "type": "string"
            }
          }
        },
        "additionalProperties": false
      },
      "AdapterDescriptor": {
        "type": "object",
        "required": [
          "id",
          "name",
          "version",
          "author",
          "description",
          "supportedProtocols",
          "registryType",
          "capabilities",
          "enabled",
          "priority",
          "status"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Adapter identifier used in configuration."
          },
          "name": {
            "type": "string",
            "description": "Human readable adapter name."
          },
          "version": {
            "type": "string",
            "description": "Adapter version."
          },
          "author": {
            "type": "string",
            "description": "Adapter author or maintainer."
          },
          "description": {
            "type": "string",
            "description": "Short adapter description."
          },
          "supportedProtocols": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of protocols supported by the adapter."
          },
          "registryType": {
            "type": "string",
            "description": "Registry topology served by the adapter.",
            "enum": [
              "web2",
              "web3",
              "hybrid"
            ]
          },
          "chatProfile": {
            "$ref": "#/components/schemas/AdapterChatProfile"
          },
          "capabilities": {
            "$ref": "#/components/schemas/AdapterCapabilities"
          },
          "enabled": {
            "type": "boolean",
            "description": "Whether the adapter is enabled in the running deployment."
          },
          "priority": {
            "type": "number",
            "description": "Priority value used when routing messages across multiple adapters."
          },
          "status": {
            "type": "string",
            "enum": [
              "running",
              "stopped"
            ],
            "description": "Current runtime state of the adapter."
          }
        },
        "additionalProperties": false
      },
      "AdapterDetailsResponse": {
        "type": "object",
        "required": [
          "adapters"
        ],
        "properties": {
          "adapters": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdapterDescriptor"
            }
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistryCategory": {
        "type": "object",
        "required": [
          "id",
          "network",
          "type",
          "slug",
          "name",
          "topicId",
          "versionTopicId",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "id": {
            "type": "number"
          },
          "network": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "adapter-type",
              "custom"
            ]
          },
          "slug": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "topicId": {
            "type": "string"
          },
          "versionTopicId": {
            "type": "string"
          },
          "registryTransactionId": {
            "type": "string",
            "nullable": true
          },
          "versionTransactionId": {
            "type": "string",
            "nullable": true
          },
          "metadataPointer": {
            "type": "string",
            "nullable": true
          },
          "metadataSequence": {
            "type": "number",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistryCategoriesResponse": {
        "type": "object",
        "required": [
          "categories"
        ],
        "properties": {
          "categories": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdapterRegistryCategory"
            }
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistryCreateCategoryResponse": {
        "type": "object",
        "required": [
          "category"
        ],
        "properties": {
          "category": {
            "$ref": "#/components/schemas/AdapterRegistryCategory"
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistryAdapter": {
        "type": "object",
        "required": [
          "adapterId",
          "entity"
        ],
        "properties": {
          "id": {
            "type": "number"
          },
          "network": {
            "type": "string"
          },
          "categoryId": {
            "type": "number",
            "nullable": true
          },
          "operation": {
            "type": "string"
          },
          "adapterId": {
            "type": "string"
          },
          "adapterName": {
            "type": "string",
            "nullable": true
          },
          "entity": {
            "type": "string"
          },
          "manifestPointer": {
            "type": "string",
            "nullable": true
          },
          "manifestSequence": {
            "type": "number",
            "nullable": true
          },
          "packageRegistry": {
            "type": "string",
            "nullable": true
          },
          "packageName": {
            "type": "string",
            "nullable": true
          },
          "packageVersion": {
            "type": "string",
            "nullable": true
          },
          "packageIntegrity": {
            "type": "string",
            "nullable": true
          },
          "stateModel": {
            "type": "string",
            "nullable": true
          },
          "config": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "signature": {
            "type": "string",
            "nullable": true
          },
          "manifest": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          },
          "transactionId": {
            "type": "string",
            "nullable": true
          },
          "declarationTopicId": {
            "type": "string",
            "nullable": true
          },
          "versionTopicId": {
            "type": "string",
            "nullable": true
          },
          "categoryEntryTransactionId": {
            "type": "string",
            "nullable": true
          },
          "versionPointerTransactionId": {
            "type": "string",
            "nullable": true
          },
          "totalCostHbar": {
            "type": "number",
            "nullable": true
          },
          "totalCostCredits": {
            "type": "number",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "category": {
            "$ref": "#/components/schemas/AdapterRegistryCategory"
          }
        },
        "additionalProperties": true
      },
      "AdapterRegistryAdaptersResponse": {
        "type": "object",
        "required": [
          "network",
          "adapters"
        ],
        "properties": {
          "network": {
            "type": "string"
          },
          "adapters": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdapterRegistryAdapter"
            }
          }
        },
        "additionalProperties": false
      },
      "CreateAdapterRegistryCategoryRequest": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "adapter-type",
              "custom"
            ]
          },
          "slug": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "additionalProperties": false
      },
      "SubmitAdapterRegistryAdapterRequest": {
        "type": "object",
        "required": [
          "adapterId",
          "adapterName",
          "entity",
          "package",
          "config",
          "manifest"
        ],
        "properties": {
          "adapterId": {
            "type": "string"
          },
          "adapterName": {
            "type": "string"
          },
          "entity": {
            "type": "string"
          },
          "package": {
            "type": "object",
            "required": [
              "registry",
              "name",
              "version",
              "integrity"
            ],
            "properties": {
              "registry": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "version": {
                "type": "string"
              },
              "integrity": {
                "type": "string"
              }
            },
            "additionalProperties": false
          },
          "config": {
            "type": "object",
            "additionalProperties": true
          },
          "stateModel": {
            "type": "string"
          },
          "signature": {
            "type": "string"
          },
          "manifest": {
            "type": "object",
            "additionalProperties": true
          },
          "manifestPointer": {
            "type": "string"
          },
          "manifestSequence": {
            "type": "number"
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "categorySlug": {
            "type": "string"
          },
          "newCategory": {
            "$ref": "#/components/schemas/CreateAdapterRegistryCategoryRequest"
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistrySubmissionAcceptedResponse": {
        "type": "object",
        "required": [
          "submissionId",
          "status"
        ],
        "properties": {
          "submissionId": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "network": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistrySubmissionRecord": {
        "type": "object",
        "required": [
          "id",
          "network",
          "status",
          "adapterId",
          "createdAt"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "network": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "running",
              "completed",
              "failed"
            ]
          },
          "adapterId": {
            "type": "string"
          },
          "categorySlug": {
            "type": "string",
            "nullable": true
          },
          "creditAccountId": {
            "type": "string",
            "nullable": true
          },
          "registeredByUserId": {
            "type": "string",
            "nullable": true
          },
          "registeredByEmail": {
            "type": "string",
            "nullable": true
          },
          "resultPayload": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "startedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AdapterRegistrySubmissionStatusResponse": {
        "type": "object",
        "required": [
          "submission"
        ],
        "properties": {
          "submission": {
            "$ref": "#/components/schemas/AdapterRegistrySubmissionRecord"
          }
        },
        "additionalProperties": false
      },
      "ProviderCatalogResponse": {
        "type": "object",
        "required": [
          "adapters",
          "communicationProtocols"
        ],
        "properties": {
          "adapters": {
            "type": "array",
            "description": "Adapter descriptors registered with the broker.",
            "items": {
              "$ref": "#/components/schemas/AdapterDescriptor"
            }
          },
          "communicationProtocols": {
            "type": "array",
            "description": "Communication protocols supported by the broker routing layer.",
            "items": {
              "type": "string"
            }
          }
        },
        "additionalProperties": false
      },
      "TrustAttestationEntry": {
        "type": "object",
        "required": [
          "uaid",
          "type"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "rating": {
            "type": "number",
            "nullable": true
          },
          "evidence": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "issuer": {
            "type": "string",
            "nullable": true
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "protocol": {
            "type": "string",
            "nullable": true
          },
          "claims": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          }
        },
        "additionalProperties": true
      },
      "TrustAttestationListResponse": {
        "type": "object",
        "required": [
          "attestations"
        ],
        "properties": {
          "attestations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TrustAttestationEntry"
            }
          }
        }
      },
      "TrustAttestationRequest": {
        "type": "object",
        "required": [
          "uaid",
          "type"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "rating": {
            "type": "number",
            "nullable": true
          },
          "evidence": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "issuerId": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": true
      },
      "TrustAttestationSubmitResponse": {
        "type": "object",
        "required": [
          "success"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "transactionId": {
            "type": "string",
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "LatestTrustAttestationResponse": {
        "type": "object",
        "required": [
          "attestation"
        ],
        "properties": {
          "attestation": {
            "type": "object",
            "required": [
              "floraId",
              "timestamp",
              "agents",
              "stateRoot",
              "consensus",
              "metrics"
            ],
            "properties": {
              "floraId": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "agents": {
                "type": "object",
                "properties": {
                  "total": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "byRegistry": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "integer",
                      "minimum": 0
                    }
                  },
                  "byCapability": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "integer",
                      "minimum": 0
                    }
                  }
                }
              },
              "stateRoot": {
                "type": "string"
              },
              "consensus": {
                "type": "object",
                "required": [
                  "achieved",
                  "threshold",
                  "petalCount"
                ],
                "properties": {
                  "achieved": {
                    "type": "number"
                  },
                  "threshold": {
                    "type": "number"
                  },
                  "petalCount": {
                    "type": "integer",
                    "minimum": 0
                  }
                }
              },
              "metrics": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      },
      "TrustAttestationVerificationResponse": {
        "type": "object",
        "required": [
          "valid"
        ],
        "properties": {
          "valid": {
            "type": "boolean"
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "verifiedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "attestation": {
            "type": "object",
            "nullable": true,
            "properties": {
              "floraId": {
                "type": "string"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "agentCount": {
                "type": "integer",
                "minimum": 0
              }
            }
          }
        }
      },
      "TrustAttestationQueryResponse": {
        "type": "object",
        "required": [
          "attestations",
          "count"
        ],
        "properties": {
          "attestations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TrustAttestationEntry"
            }
          },
          "count": {
            "type": "integer",
            "minimum": 0
          }
        }
      },
      "TrustScoreResponse": {
        "type": "object",
        "required": [
          "uaid",
          "trustScore",
          "trustScores",
          "timestamp"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "trustScore": {
            "type": "number"
          },
          "trustScores": {
            "type": "object",
            "additionalProperties": {
              "type": "number"
            }
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "TrustMetricsResponse": {
        "type": "object",
        "additionalProperties": true,
        "description": "Implementation specific trust attestation metrics."
      },
      "UaidRouteRequest": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {}
              }
            ]
          }
        },
        "additionalProperties": true
      },
      "UaidRouteResponse": {
        "type": "object",
        "required": [
          "response"
        ],
        "properties": {
          "response": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "number"
              },
              {
                "type": "boolean"
              },
              {
                "type": "null"
              },
              {
                "type": "object",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {}
              }
            ]
          }
        }
      },
      "ResolveUaidResponse": {
        "type": "object",
        "required": [
          "agent"
        ],
        "properties": {
          "agent": {
            "$ref": "#/components/schemas/AgentDetail"
          }
        }
      },
      "UaidValidationResponse": {
        "type": "object",
        "required": [
          "uaid",
          "valid",
          "formats"
        ],
        "properties": {
          "uaid": {
            "type": "string"
          },
          "valid": {
            "type": "boolean"
          },
          "formats": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "UaidConnectionStatusResponse": {
        "type": "object",
        "required": [
          "connected"
        ],
        "properties": {
          "connected": {
            "type": "boolean"
          },
          "adapter": {
            "type": "string",
            "nullable": true
          },
          "agentId": {
            "type": "string",
            "nullable": true
          },
          "connection": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          }
        },
        "additionalProperties": true
      },
      "UaidConnectionCloseResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "FederationRegistry": {
        "type": "object",
        "required": [
          "id",
          "name",
          "endpoint",
          "protocols",
          "trustLevel"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "endpoint": {
            "type": "string",
            "format": "uri"
          },
          "protocols": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "trustLevel": {
            "type": "number"
          },
          "lastSeen": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "nullable": true
          }
        }
      },
      "FederationRegistriesResponse": {
        "type": "object",
        "required": [
          "registries"
        ],
        "properties": {
          "registries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FederationRegistry"
            }
          }
        }
      },
      "FederationDiscoverRequest": {
        "type": "object",
        "properties": {
          "capabilities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "registries": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxResults": {
            "type": "integer",
            "minimum": 1
          }
        },
        "additionalProperties": false
      },
      "FederationAgentDiscovery": {
        "type": "object",
        "required": [
          "registry",
          "agents"
        ],
        "properties": {
          "registry": {
            "type": "string"
          },
          "agents": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "uaid",
                "name"
              ],
              "properties": {
                "uaid": {
                  "type": "string"
                },
                "id": {
                  "type": "string",
                  "nullable": true
                },
                "name": {
                  "type": "string"
                },
                "capabilities": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "protocols": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "metadata": {
                  "type": "object",
                  "additionalProperties": {
                    "oneOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      },
                      {
                        "type": "boolean"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "nullable": true
                }
              }
            }
          },
          "totalCount": {
            "type": "integer",
            "minimum": 0,
            "nullable": true
          },
          "hasMore": {
            "type": "boolean",
            "nullable": true
          }
        }
      },
      "FederationDiscoverResponse": {
        "type": "object",
        "required": [
          "discoveries"
        ],
        "properties": {
          "discoveries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FederationAgentDiscovery"
            }
          }
        }
      },
      "FederationCapabilityQueryRequest": {
        "type": "object",
        "required": [
          "requiredCapabilities"
        ],
        "properties": {
          "requiredCapabilities": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "excludedCapabilities": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "maxResults": {
            "type": "integer",
            "minimum": 1
          }
        },
        "additionalProperties": false
      },
      "FederationCapabilityQueryResponse": {
        "type": "object",
        "required": [
          "results"
        ],
        "properties": {
          "results": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FederationAgentDiscovery"
            }
          }
        }
      },
      "FederationSyncRequest": {
        "type": "object",
        "properties": {
          "requestedData": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "agents",
                "capabilities",
                "metadata"
              ]
            }
          }
        },
        "additionalProperties": false
      },
      "FederationSyncResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "FederationRegistryRequest": {
        "type": "object",
        "required": [
          "id",
          "name",
          "endpoint",
          "protocols"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "endpoint": {
            "type": "string",
            "format": "uri"
          },
          "protocols": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "trustLevel": {
            "type": "number",
            "default": 0.5
          },
          "metadata": {
            "type": "object",
            "additionalProperties": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ]
            },
            "nullable": true
          }
        }
      },
      "FederationRegistryResponse": {
        "type": "object",
        "required": [
          "success",
          "registry"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "registry": {
            "$ref": "#/components/schemas/FederationRegistry"
          }
        }
      },
      "FederationRegistryRemoveResponse": {
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "FederationStatusResponse": {
        "type": "object",
        "required": [
          "isRunning",
          "knownRegistries",
          "activeSyncs"
        ],
        "properties": {
          "isRunning": {
            "type": "boolean"
          },
          "knownRegistries": {
            "type": "integer",
            "minimum": 0
          },
          "activeSyncs": {
            "type": "integer",
            "minimum": 0
          },
          "lastHeartbeat": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        }
      },
      "AdditionalRegistryNetwork": {
        "type": "object",
        "required": [
          "key",
          "registryId",
          "networkId",
          "name",
          "chainId",
          "label",
          "estimatedCredits",
          "baseCredits",
          "gasPortionCredits",
          "gasPortionUsd",
          "gasEstimateCredits",
          "gasEstimateUsd",
          "creditMode"
        ],
        "properties": {
          "key": {
            "type": "string",
            "description": "Unique identifier for the registry network (registryId:networkId)."
          },
          "registryId": {
            "type": "string",
            "description": "Canonical registry identifier (e.g. erc-8004)."
          },
          "networkId": {
            "type": "string",
            "description": "Network identifier used to disambiguate registry deployments."
          },
          "name": {
            "type": "string",
            "description": "Human readable network name."
          },
          "chainId": {
            "type": "number",
            "description": "EVM chain id for the registry network."
          },
          "label": {
            "type": "string",
            "description": "Display label combining registry and network context."
          },
          "estimatedCredits": {
            "type": "number",
            "description": "Total estimated credits (base + gas)."
          },
          "baseCredits": {
            "type": "number",
            "description": "Base credits charged before gas usage is calculated."
          },
          "gasPortionCredits": {
            "type": "number",
            "description": "Estimated gas portion in credits."
          },
          "gasPortionUsd": {
            "type": "number",
            "description": "Estimated gas portion converted to USD."
          },
          "gasEstimateCredits": {
            "type": "number",
            "description": "Raw gas estimate prior to rounding."
          },
          "gasEstimateUsd": {
            "type": "number",
            "description": "Gas estimate converted to USD."
          },
          "gasPriceGwei": {
            "type": "number",
            "nullable": true,
            "description": "Gas price snapshot in gwei."
          },
          "gasLimit": {
            "type": "number",
            "nullable": true,
            "description": "Gas limit used for the estimate."
          },
          "minCredits": {
            "type": "number",
            "nullable": true,
            "description": "Minimum credits that will be charged regardless of gas usage."
          },
          "creditMode": {
            "type": "string",
            "enum": [
              "fixed",
              "gas"
            ],
            "description": "Pricing mode for the registry network."
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistryGroup": {
        "type": "object",
        "required": [
          "id",
          "label",
          "networks"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Registry identifier shared by all networks in the group."
          },
          "label": {
            "type": "string",
            "description": "Display label for the registry."
          },
          "networks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryNetwork"
            }
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistriesResponse": {
        "type": "object",
        "required": [
          "registries"
        ],
        "properties": {
          "registries": {
            "type": "array",
            "description": "Catalog of optional registries that can be selected during registration.",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryGroup"
            }
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistryQuoteNetwork": {
        "type": "object",
        "required": [
          "key",
          "registry",
          "networkId",
          "networkName",
          "estimatedCredits",
          "baseCredits",
          "gasPortionCredits",
          "gasPortionUsd",
          "gasEstimateCredits",
          "gasEstimateUsd",
          "creditMode"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "registry": {
            "type": "string"
          },
          "networkId": {
            "type": "string"
          },
          "networkName": {
            "type": "string"
          },
          "estimatedCredits": {
            "type": "number"
          },
          "baseCredits": {
            "type": "number"
          },
          "gasPortionCredits": {
            "type": "number"
          },
          "gasPortionUsd": {
            "type": "number"
          },
          "gasEstimateCredits": {
            "type": "number"
          },
          "gasEstimateUsd": {
            "type": "number"
          },
          "gasPriceGwei": {
            "type": "number",
            "nullable": true
          },
          "gasLimit": {
            "type": "number",
            "nullable": true
          },
          "creditMode": {
            "type": "string",
            "enum": [
              "fixed",
              "gas"
            ]
          },
          "minCredits": {
            "type": "number",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistryTransaction": {
        "type": "object",
        "required": [
          "hash",
          "gasUsedWei",
          "costWei"
        ],
        "properties": {
          "hash": {
            "type": "string"
          },
          "gasUsedWei": {
            "type": "string"
          },
          "effectiveGasPriceWei": {
            "type": "string",
            "nullable": true
          },
          "costWei": {
            "type": "string"
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistryCost": {
        "type": "object",
        "required": [
          "credits",
          "usd",
          "eth"
        ],
        "properties": {
          "credits": {
            "type": "number"
          },
          "usd": {
            "type": "number"
          },
          "eth": {
            "type": "number"
          },
          "gasUsedWei": {
            "type": "string",
            "nullable": true
          },
          "effectiveGasPriceWei": {
            "type": "string",
            "nullable": true
          },
          "transactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryTransaction"
            }
          },
          "baseCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCreditsRaw": {
            "type": "number",
            "nullable": true
          },
          "usdBase": {
            "type": "number",
            "nullable": true
          },
          "usdGas": {
            "type": "number",
            "nullable": true
          },
          "creditUnitUsd": {
            "type": "number",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistryResult": {
        "type": "object",
        "required": [
          "registry",
          "status"
        ],
        "properties": {
          "registry": {
            "type": "string"
          },
          "registryKey": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "created",
              "updated",
              "duplicate",
              "skipped",
              "pending",
              "error"
            ]
          },
          "agentId": {
            "type": "string",
            "nullable": true
          },
          "agentUri": {
            "type": "string",
            "nullable": true
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "networkId": {
            "type": "string",
            "nullable": true
          },
          "networkName": {
            "type": "string",
            "nullable": true
          },
          "chainId": {
            "type": "number",
            "nullable": true
          },
          "estimatedCredits": {
            "type": "number",
            "nullable": true
          },
          "baseCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCreditsRaw": {
            "type": "number",
            "nullable": true
          },
          "gasPortionCredits": {
            "type": "number",
            "nullable": true
          },
          "gasPortionUsd": {
            "type": "number",
            "nullable": true
          },
          "creditMode": {
            "type": "string",
            "enum": [
              "fixed",
              "gas"
            ],
            "nullable": true
          },
          "minCredits": {
            "type": "number",
            "nullable": true
          },
          "gasEstimateCredits": {
            "type": "number",
            "nullable": true
          },
          "gasEstimateUsd": {
            "type": "number",
            "nullable": true
          },
          "gasPriceGwei": {
            "type": "number",
            "nullable": true
          },
          "gasLimit": {
            "type": "number",
            "nullable": true
          },
          "consumedCredits": {
            "type": "number",
            "nullable": true
          },
          "cost": {
            "$ref": "#/components/schemas/AdditionalRegistryCost",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AdditionalRegistrySummary": {
        "type": "object",
        "required": [
          "registry"
        ],
        "properties": {
          "registry": {
            "type": "string"
          },
          "registryKey": {
            "type": "string",
            "nullable": true
          },
          "networkId": {
            "type": "string",
            "nullable": true
          },
          "networkName": {
            "type": "string",
            "nullable": true
          },
          "chainId": {
            "type": "number",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "created",
              "updated",
              "duplicate",
              "skipped",
              "pending",
              "error"
            ],
            "nullable": true
          },
          "estimatedCredits": {
            "type": "number",
            "nullable": true
          },
          "baseCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCredits": {
            "type": "number",
            "nullable": true
          },
          "gasCreditsRaw": {
            "type": "number",
            "nullable": true
          },
          "gasPortionCredits": {
            "type": "number",
            "nullable": true
          },
          "gasPortionUsd": {
            "type": "number",
            "nullable": true
          },
          "gasEstimateCredits": {
            "type": "number",
            "nullable": true
          },
          "gasEstimateUsd": {
            "type": "number",
            "nullable": true
          },
          "gasPriceGwei": {
            "type": "number",
            "nullable": true
          },
          "gasLimit": {
            "type": "number",
            "nullable": true
          },
          "creditMode": {
            "type": "string",
            "enum": [
              "fixed",
              "gas"
            ],
            "nullable": true
          },
          "minCredits": {
            "type": "number",
            "nullable": true
          },
          "consumedCredits": {
            "type": "number",
            "nullable": true
          },
          "cost": {
            "$ref": "#/components/schemas/AdditionalRegistryCost",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "RegistrationCredits": {
        "type": "object",
        "required": [
          "base",
          "additional",
          "total"
        ],
        "properties": {
          "base": {
            "type": "number"
          },
          "additional": {
            "type": "number"
          },
          "total": {
            "type": "number"
          }
        },
        "additionalProperties": false
      },
      "AgentRegistrationRequest": {
        "type": "object",
        "required": [
          "profile"
        ],
        "properties": {
          "profile": {
            "type": "object",
            "description": "HCS-11 profile document to register.",
            "additionalProperties": true
          },
          "registry": {
            "type": "string"
          },
          "endpoint": {
            "type": "string"
          },
          "communicationProtocol": {
            "type": "string"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true
          },
          "additionalRegistries": {
            "type": "array",
            "description": "Optional list of additional registries to publish the agent to. Entries may be registry keys (e.g. `erc-8004` or `erc-8004:ethereum-sepolia`) or structured objects that specify the target network.",
            "items": {
              "oneOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object",
                  "properties": {
                    "registry": {
                      "type": "string"
                    },
                    "networkId": {
                      "type": "string"
                    },
                    "key": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                }
              ]
            }
          }
        },
        "additionalProperties": true
      },
      "RegistrationQuoteResponse": {
        "type": "object",
        "required": [
          "creditAccountId",
          "registry",
          "protocol",
          "requiredCredits",
          "baseCredits",
          "additionalCredits",
          "additionalRegistryCount",
          "additionalRegistries",
          "shortfallCredits"
        ],
        "properties": {
          "accountId": {
            "type": "string",
            "nullable": true
          },
          "creditAccountId": {
            "type": "string"
          },
          "registry": {
            "type": "string"
          },
          "protocol": {
            "type": "string"
          },
          "requiredCredits": {
            "type": "number"
          },
          "baseCredits": {
            "type": "number"
          },
          "additionalCredits": {
            "type": "number"
          },
          "additionalRegistryCount": {
            "type": "integer",
            "minimum": 0
          },
          "additionalRegistries": {
            "type": "array",
            "description": "Detailed credit estimates for each requested additional registry.",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryQuoteNetwork"
            }
          },
          "availableCredits": {
            "type": "number",
            "nullable": true
          },
          "shortfallCredits": {
            "type": "number"
          },
          "creditsPerHbar": {
            "type": "number",
            "nullable": true
          },
          "estimatedHbar": {
            "type": "number",
            "nullable": true
          }
        }
      },
      "AgentRegistrationResponse": {
        "type": "object",
        "required": [
          "success",
          "status",
          "uaid",
          "agentId",
          "agent"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "description": "Registration outcome (created, pending, partial, duplicate, failed)."
          },
          "uaid": {
            "type": "string"
          },
          "agentId": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "agent": {
            "type": "object",
            "required": [
              "id",
              "name",
              "registry",
              "protocol",
              "profile"
            ],
            "properties": {
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "endpoint": {
                "type": "string",
                "nullable": true
              },
              "capabilities": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "registry": {
                "type": "string"
              },
              "protocol": {
                "type": "string"
              },
              "profile": {
                "type": "object",
                "additionalProperties": true
              },
              "nativeId": {
                "type": "string"
              }
            }
          },
          "openConvAI": {
            "type": "object",
            "properties": {
              "compatible": {
                "type": "boolean"
              },
              "hcs11Profile": {
                "type": "object",
                "additionalProperties": true
              },
              "bridgeEndpoint": {
                "type": "string"
              }
            }
          },
          "profile": {
            "type": "object",
            "nullable": true,
            "properties": {
              "tId": {
                "type": "string"
              },
              "sizeBytes": {
                "type": "number"
              }
            }
          },
          "profileRegistry": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "hcs10Registry": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "additionalRegistries": {
            "type": "array",
            "description": "Results for each additional registry publish attempt.",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryResult"
            }
          },
          "additionalRegistryCredits": {
            "type": "array",
            "description": "Summary of estimated and consumed credits for each additional registry.",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistrySummary"
            }
          },
          "credits": {
            "$ref": "#/components/schemas/RegistrationCredits"
          },
          "registryPublish": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "errors": {
            "type": "array",
            "nullable": true,
            "description": "Additional registry failures encountered during this attempt.",
            "items": {
              "type": "object",
              "required": [
                "registry",
                "registryKey",
                "error"
              ],
              "properties": {
                "registry": {
                  "type": "string"
                },
                "registryKey": {
                  "type": "string"
                },
                "error": {
                  "type": "string"
                }
              },
              "additionalProperties": true
            }
          },
          "attemptId": {
            "type": "string",
            "nullable": true,
            "description": "Identifier that can be polled via `/register/progress/{attemptId}`."
          }
        }
      },
      "AgentUpdateResponse": {
        "type": "object",
        "required": [
          "success",
          "uaid",
          "agent"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "description": "Outcome of the update (created, pending, partial, failed)."
          },
          "uaid": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "agent": {
            "type": "object",
            "additionalProperties": true
          },
          "profile": {
            "type": "object",
            "nullable": true,
            "properties": {
              "tId": {
                "type": "string",
                "nullable": true
              },
              "sizeBytes": {
                "type": "number",
                "nullable": true
              }
            }
          },
          "profileRegistry": {
            "type": "object",
            "nullable": true,
            "additionalProperties": true
          },
          "additionalRegistries": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistryResult"
            }
          },
          "additionalRegistryCredits": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AdditionalRegistrySummary"
            }
          },
          "credits": {
            "$ref": "#/components/schemas/RegistrationCredits"
          },
          "errors": {
            "type": "array",
            "nullable": true,
            "description": "Additional registry failures encountered during this update.",
            "items": {
              "type": "object",
              "required": [
                "registry",
                "registryKey",
                "error"
              ],
              "properties": {
                "registry": {
                  "type": "string"
                },
                "registryKey": {
                  "type": "string"
                },
                "error": {
                  "type": "string"
                }
              },
              "additionalProperties": true
            }
          },
          "attemptId": {
            "type": "string",
            "nullable": true,
            "description": "Identifier that can be polled via `/register/progress/{attemptId}`."
          }
        }
      },
      "RegistrationProgressAdditionalEntry": {
        "type": "object",
        "required": [
          "registryId",
          "registryKey",
          "status",
          "lastUpdated"
        ],
        "properties": {
          "registryId": {
            "type": "string"
          },
          "registryKey": {
            "type": "string"
          },
          "networkId": {
            "type": "string",
            "nullable": true
          },
          "networkName": {
            "type": "string",
            "nullable": true
          },
          "chainId": {
            "type": "integer",
            "nullable": true
          },
          "label": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "in_progress",
              "completed",
              "failed"
            ]
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "credits": {
            "type": "number",
            "nullable": true
          },
          "lastUpdated": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "RegistrationProgressRecord": {
        "type": "object",
        "required": [
          "attemptId",
          "mode",
          "status",
          "registryNamespace",
          "startedAt",
          "primary",
          "additionalRegistries"
        ],
        "properties": {
          "attemptId": {
            "type": "string"
          },
          "mode": {
            "type": "string",
            "enum": [
              "register",
              "update"
            ]
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "partial",
              "completed",
              "failed"
            ]
          },
          "uaid": {
            "type": "string",
            "nullable": true
          },
          "agentId": {
            "type": "string",
            "nullable": true
          },
          "registryNamespace": {
            "type": "string"
          },
          "accountId": {
            "type": "string",
            "nullable": true
          },
          "startedAt": {
            "type": "string",
            "format": "date-time"
          },
          "completedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "primary": {
            "type": "object",
            "required": [
              "status"
            ],
            "properties": {
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "completed",
                  "failed"
                ]
              },
              "finishedAt": {
                "type": "string",
                "format": "date-time",
                "nullable": true
              },
              "error": {
                "type": "string",
                "nullable": true
              }
            }
          },
          "additionalRegistries": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/RegistrationProgressAdditionalEntry"
            }
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true
          }
        }
      },
      "RegistrationProgressResponse": {
        "type": "object",
        "required": [
          "progress"
        ],
        "properties": {
          "progress": {
            "$ref": "#/components/schemas/RegistrationProgressRecord"
          }
        },
        "additionalProperties": false
      },
      "AgentDeleteResponse": {
        "type": "object",
        "required": [
          "success",
          "uaid",
          "message"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "uaid": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "RegistrationStatusResponse": {
        "type": "object",
        "required": [
          "registered"
        ],
        "properties": {
          "registered": {
            "type": "boolean"
          },
          "error": {
            "type": "string",
            "nullable": true
          },
          "agent": {
            "type": "object",
            "nullable": true,
            "properties": {
              "uaid": {
                "type": "string"
              },
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "registry": {
                "type": "string"
              },
              "capabilities": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "profile": {
                "type": "object",
                "additionalProperties": true
              },
              "metadata": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      },
      "OpenConvaiBridgeRequest": {
        "type": "object",
        "required": [
          "operatorId"
        ],
        "properties": {
          "operatorId": {
            "type": "string"
          },
          "submitToHCS": {
            "type": "boolean",
            "default": false
          }
        },
        "additionalProperties": false
      },
      "OpenConvaiBridgeResponse": {
        "type": "object",
        "required": [
          "success",
          "message",
          "openConvAIData"
        ],
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "openConvAIData": {
            "type": "object",
            "required": [
              "operatorId",
              "profile",
              "registrationSource"
            ],
            "properties": {
              "operatorId": {
                "type": "string"
              },
              "profile": {
                "type": "object",
                "additionalProperties": true
              },
              "submitToHCS": {
                "type": "boolean"
              },
              "registrationSource": {
                "type": "string"
              },
              "originalVirtualTopic": {
                "type": "string"
              },
              "instructions": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        }
      },
      "WebsocketStatsResponse": {
        "type": "object",
        "required": [
          "clients",
          "stats"
        ],
        "properties": {
          "clients": {
            "type": "integer",
            "minimum": 0
          },
          "stats": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "MetricsSummary": {
        "type": "object",
        "properties": {
          "http": {
            "type": "object",
            "additionalProperties": true
          },
          "search": {
            "type": "object",
            "additionalProperties": true
          },
          "indexing": {
            "type": "object",
            "additionalProperties": true
          },
          "registration": {
            "type": "object",
            "additionalProperties": true
          },
          "cache": {
            "type": "object",
            "additionalProperties": true
          },
          "websocket": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "additionalProperties": true
      },
      "CreditProvider": {
        "type": "object",
        "required": [
          "name",
          "publishableKey"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Unique identifier for the payment provider.",
            "example": "stripe"
          },
          "publishableKey": {
            "type": "string",
            "description": "Client-side key used to initialize the provider SDK."
          },
          "currency": {
            "type": "string",
            "description": "Default settlement currency for the provider.",
            "example": "usd"
          },
          "centsPerHbar": {
            "type": "number",
            "nullable": true,
            "description": "Dynamic conversion rate mapping one HBAR to USD cents when available."
          }
        },
        "additionalProperties": false
      },
      "CreditProvidersResponse": {
        "type": "object",
        "required": [
          "providers"
        ],
        "properties": {
          "providers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreditProvider"
            }
          }
        },
        "additionalProperties": false
      },
      "CreditBalanceResponse": {
        "type": "object",
        "required": [
          "accountId",
          "balance",
          "timestamp"
        ],
        "properties": {
          "accountId": {
            "type": "string",
            "description": "Hedera account ID the balance applies to.",
            "example": "0.0.123456"
          },
          "balance": {
            "type": "integer",
            "minimum": 0,
            "description": "Total available credits.",
            "example": 1200
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the balance was fetched."
          }
        },
        "additionalProperties": false
      },
      "CreditTransaction": {
        "type": "object",
        "required": [
          "id",
          "accountId",
          "type",
          "amount",
          "balance",
          "description",
          "status",
          "timestamp"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "accountId": {
            "type": "string",
            "example": "0.0.123456"
          },
          "type": {
            "type": "string",
            "enum": [
              "credit",
              "debit",
              "transfer_in",
              "transfer_out",
              "reserve",
              "release"
            ]
          },
          "amount": {
            "type": "integer",
            "minimum": 0,
            "example": 1000
          },
          "balance": {
            "type": "integer",
            "example": 5000
          },
          "description": {
            "type": "string"
          },
          "relatedAccountId": {
            "type": "string",
            "nullable": true
          },
          "reservationId": {
            "type": "string",
            "nullable": true
          },
          "provider": {
            "type": "string",
            "nullable": true
          },
          "externalReference": {
            "type": "string",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "nullable": true
          },
          "status": {
            "type": "string",
            "enum": [
              "completed",
              "failed",
              "pending"
            ]
          },
          "reason": {
            "type": "string",
            "nullable": true
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "CreditTransactionListResponse": {
        "type": "object",
        "required": [
          "accountId",
          "transactions",
          "timestamp"
        ],
        "properties": {
          "accountId": {
            "type": "string",
            "example": "0.0.123456"
          },
          "transactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreditTransaction"
            }
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "HbarPurchaseIntentRequest": {
        "type": "object",
        "properties": {
          "accountId": {
            "type": "string",
            "description": "Hedera account ID that will fund the purchase.",
            "example": "0.0.123456"
          },
          "credits": {
            "type": "integer",
            "minimum": 1,
            "description": "Desired amount of credits to purchase. Overrides hbarAmount when both are supplied."
          },
          "hbarAmount": {
            "type": "number",
            "minimum": "1e-8",
            "description": "HBAR amount to transfer to the broker treasury. Converted to credits when `credits` is omitted."
          }
        },
        "additionalProperties": false
      },
      "HbarPurchaseIntentResponse": {
        "type": "object",
        "required": [
          "transaction",
          "transactionId",
          "network",
          "accountId",
          "treasuryAccountId",
          "hbarAmount",
          "credits",
          "tinybarAmount",
          "memo",
          "centsPerHbar",
          "validStart",
          "validDurationSeconds",
          "requiresManualSubmit",
          "purchaseId"
        ],
        "properties": {
          "transaction": {
            "type": "string",
            "description": "Base64 encoded Hedera transfer transaction ready for signing."
          },
          "transactionId": {
            "type": "string",
            "description": "Original Hedera transaction ID."
          },
          "network": {
            "type": "string",
            "description": "Hedera network the transaction targets.",
            "example": "mainnet"
          },
          "accountId": {
            "type": "string",
            "description": "Hedera account that will fund the transfer."
          },
          "treasuryAccountId": {
            "type": "string",
            "description": "Broker treasury account that will receive the HBAR."
          },
          "hbarAmount": {
            "type": "number",
            "minimum": "1e-8",
            "description": "HBAR amount represented by the transaction."
          },
          "credits": {
            "type": "integer",
            "minimum": 1,
            "description": "Credits that will be issued once the transfer is confirmed."
          },
          "tinybarAmount": {
            "type": "integer",
            "minimum": 1,
            "description": "Transfer amount expressed in tinybars."
          },
          "memo": {
            "type": "string",
            "description": "Memo applied to the Hedera transfer for traceability."
          },
          "centsPerHbar": {
            "type": "number",
            "description": "Conversion rate used to calculate credits from HBAR."
          },
          "validStart": {
            "type": "string",
            "format": "date-time",
            "description": "Transaction valid start timestamp."
          },
          "validDurationSeconds": {
            "type": "integer",
            "minimum": 1,
            "description": "Number of seconds the transaction remains valid."
          },
          "requiresManualSubmit": {
            "type": "boolean",
            "description": "Indicates whether the caller must submit the transaction manually.",
            "example": true
          },
          "purchaseId": {
            "type": "string",
            "description": "Identifier assigned to the purchase record for reconciliation."
          }
        },
        "additionalProperties": false
      },
      "StripePurchaseIntentRequest": {
        "type": "object",
        "required": [
          "amount"
        ],
        "properties": {
          "accountId": {
            "type": "string",
            "description": "Ledger account that should receive the purchased credits."
          },
          "credits": {
            "type": "integer",
            "minimum": 1,
            "description": "Target credit allotment for the purchase. Optional when converting from `amount`."
          },
          "amount": {
            "type": "integer",
            "minimum": 1,
            "description": "Amount to charge in the smallest unit for the selected currency (for USD this is cents).",
            "example": 2500
          },
          "currency": {
            "type": "string",
            "description": "Three-letter ISO currency code to bill against.",
            "example": "usd"
          },
          "paymentMethodId": {
            "type": "string",
            "description": "Existing Stripe payment method to attach to the intent."
          },
          "customerId": {
            "type": "string",
            "description": "Stripe customer identifier to reuse for the payment."
          },
          "metadata": {
            "type": "object",
            "description": "Additional fields stored on the Stripe payment intent.",
            "additionalProperties": true
          },
          "description": {
            "type": "string",
            "description": "Free-form description for the payment intent."
          },
          "idempotencyKey": {
            "type": "string",
            "description": "Client-supplied identifier that prevents duplicate Stripe intents."
          }
        },
        "additionalProperties": false
      },
      "StripePurchaseIntentResponse": {
        "type": "object",
        "required": [
          "success",
          "provider",
          "intentId",
          "clientSecret",
          "status",
          "amount",
          "currency",
          "publishableKey"
        ],
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Indicates whether the payment intent was created successfully."
          },
          "provider": {
            "type": "string",
            "description": "Payment provider that fulfilled the request.",
            "example": "stripe"
          },
          "intentId": {
            "type": "string",
            "description": "Identifier of the Stripe payment intent."
          },
          "clientSecret": {
            "type": "string",
            "description": "Client secret used to complete the Stripe payment on the frontend."
          },
          "status": {
            "type": "string",
            "description": "Current status of the Stripe payment intent.",
            "example": "requires_payment_method"
          },
          "amount": {
            "type": "integer",
            "minimum": 1,
            "description": "Amount the intent will charge in the smallest currency unit."
          },
          "currency": {
            "type": "string",
            "description": "Three-letter ISO currency code associated with the intent."
          },
          "credits": {
            "type": "integer",
            "minimum": 1,
            "description": "Credits that will be issued when the payment succeeds."
          },
          "publishableKey": {
            "type": "string",
            "description": "Stripe publishable key to initialize the client SDK."
          },
          "customerId": {
            "type": "string",
            "nullable": true,
            "description": "Stripe customer identifier linked to the intent when available."
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionConfigResponse": {
        "type": "object",
        "required": [
          "enabled"
        ],
        "properties": {
          "enabled": {
            "type": "boolean",
            "description": "Whether the content inscription service is enabled.",
            "example": true
          },
          "maxSizeBytes": {
            "type": "integer",
            "nullable": true,
            "description": "Maximum file size allowed for inscription in bytes.",
            "example": 10485760
          },
          "allowedMimeTypes": {
            "type": "array",
            "nullable": true,
            "items": {
              "type": "string"
            },
            "description": "List of allowed MIME types. Empty or null means all types are allowed.",
            "example": [
              "image/png",
              "image/jpeg",
              "application/json"
            ]
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionQuoteRequest": {
        "type": "object",
        "required": [
          "inputType"
        ],
        "properties": {
          "inputType": {
            "type": "string",
            "enum": [
              "url",
              "base64"
            ],
            "description": "Source type of the content to inscribe.",
            "example": "base64"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "URL to fetch content from (required when inputType is 'url')."
          },
          "base64": {
            "type": "string",
            "description": "Base64-encoded content data (required when inputType is 'base64')."
          },
          "fileName": {
            "type": "string",
            "description": "Original filename for the content.",
            "example": "document.json"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the content. Auto-detected if not provided.",
            "example": "application/json"
          },
          "mode": {
            "type": "string",
            "enum": [
              "file",
              "upload",
              "hashinal",
              "hashinal-collection"
            ],
            "description": "Inscription mode determining how content is stored on HCS.",
            "default": "file"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Custom metadata to attach to the inscription."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for categorizing the inscription."
          },
          "fileStandard": {
            "type": "string",
            "description": "HCS file standard to use (e.g., HCS-5)."
          },
          "chunkSize": {
            "type": "integer",
            "minimum": 1,
            "description": "Custom chunk size for splitting large content."
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionQuoteResponse": {
        "type": "object",
        "required": [
          "quoteId",
          "contentHash",
          "totalCostHbar",
          "credits",
          "usdCents",
          "expiresAt",
          "mode"
        ],
        "properties": {
          "quoteId": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for this quote. Use when creating the inscription job."
          },
          "contentHash": {
            "type": "string",
            "description": "SHA-256 hash of the content."
          },
          "sizeBytes": {
            "type": "integer",
            "nullable": true,
            "description": "Size of the content in bytes."
          },
          "totalCostHbar": {
            "type": "number",
            "description": "Total cost in HBAR for inscribing the content.",
            "example": 0.05
          },
          "credits": {
            "type": "integer",
            "description": "Number of registry credits required.",
            "example": 4
          },
          "usdCents": {
            "type": "integer",
            "description": "Approximate cost in USD cents.",
            "example": 1
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when this quote expires."
          },
          "mode": {
            "type": "string",
            "enum": [
              "file",
              "upload",
              "hashinal",
              "hashinal-collection"
            ],
            "description": "Inscription mode used for the quote."
          },
          "rawQuote": {
            "type": "object",
            "additionalProperties": true,
            "description": "Raw quote details from the standards-sdk."
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionCreateRequest": {
        "type": "object",
        "required": [
          "inputType"
        ],
        "properties": {
          "inputType": {
            "type": "string",
            "enum": [
              "url",
              "base64"
            ],
            "description": "Source type of the content to inscribe.",
            "example": "base64"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "URL to fetch content from (required when inputType is 'url')."
          },
          "base64": {
            "type": "string",
            "description": "Base64-encoded content data (required when inputType is 'base64')."
          },
          "fileName": {
            "type": "string",
            "description": "Original filename for the content.",
            "example": "document.json"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the content. Auto-detected if not provided.",
            "example": "application/json"
          },
          "mode": {
            "type": "string",
            "enum": [
              "file",
              "upload",
              "hashinal",
              "hashinal-collection"
            ],
            "description": "Inscription mode determining how content is stored on HCS.",
            "default": "file"
          },
          "metadata": {
            "type": "object",
            "additionalProperties": true,
            "description": "Custom metadata to attach to the inscription."
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Tags for categorizing the inscription."
          },
          "fileStandard": {
            "type": "string",
            "description": "HCS file standard to use (e.g., HCS-5)."
          },
          "chunkSize": {
            "type": "integer",
            "minimum": 1,
            "description": "Custom chunk size for splitting large content."
          },
          "quoteId": {
            "type": "string",
            "format": "uuid",
            "description": "Optional quote ID to lock in a previously obtained price."
          },
          "waitForConfirmation": {
            "type": "boolean",
            "default": false,
            "description": "If true, the request blocks until inscription is complete."
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionJobStatusResponse": {
        "type": "object",
        "required": [
          "jobId",
          "status",
          "mode",
          "createdAt",
          "updatedAt",
          "network"
        ],
        "properties": {
          "jobId": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the inscription job."
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "in_progress",
              "completed",
              "failed"
            ],
            "description": "Current status of the inscription job."
          },
          "hrl": {
            "type": "string",
            "nullable": true,
            "description": "HCS Resource Locator for the inscribed content (available when completed).",
            "example": "hcs://1/0.0.7626857"
          },
          "topicId": {
            "type": "string",
            "nullable": true,
            "description": "HCS topic ID where the content is stored.",
            "example": "0.0.7626857"
          },
          "transactionId": {
            "type": "string",
            "nullable": true,
            "description": "Hedera transaction ID of the inscription."
          },
          "failureReason": {
            "type": "string",
            "nullable": true,
            "description": "Error message if the job failed."
          },
          "sizeBytes": {
            "type": "integer",
            "nullable": true,
            "description": "Size of the inscribed content in bytes."
          },
          "fileName": {
            "type": "string",
            "nullable": true,
            "description": "Original filename of the content."
          },
          "mimeType": {
            "type": "string",
            "nullable": true,
            "description": "MIME type of the content."
          },
          "mode": {
            "type": "string",
            "enum": [
              "file",
              "upload",
              "hashinal",
              "hashinal-collection"
            ],
            "description": "Inscription mode used."
          },
          "quoteCredits": {
            "type": "integer",
            "nullable": true,
            "description": "Credits charged for the inscription."
          },
          "quoteUsdCents": {
            "type": "integer",
            "nullable": true,
            "description": "USD cents equivalent of the credits charged."
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the job was created."
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the job was last updated."
          },
          "reservationId": {
            "type": "string",
            "nullable": true,
            "description": "Credit reservation identifier."
          },
          "network": {
            "type": "string",
            "enum": [
              "mainnet",
              "testnet"
            ],
            "description": "Hedera network where the content is inscribed."
          }
        },
        "additionalProperties": false
      },
      "ContentInscriptionListResponse": {
        "type": "object",
        "required": [
          "inscriptions",
          "total"
        ],
        "properties": {
          "inscriptions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContentInscriptionJobStatusResponse"
            },
            "description": "List of inscription jobs."
          },
          "total": {
            "type": "integer",
            "minimum": 0,
            "description": "Total number of inscriptions matching the query."
          },
          "limit": {
            "type": "integer",
            "description": "Maximum results returned."
          },
          "offset": {
            "type": "integer",
            "description": "Number of results skipped."
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryFileInput": {
        "type": "object",
        "required": [
          "name",
          "base64"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "SKILL.md"
          },
          "base64": {
            "type": "string",
            "description": "Base64-encoded file contents."
          },
          "mimeType": {
            "type": "string",
            "nullable": true,
            "example": "text/markdown"
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryFileDescriptor": {
        "type": "object",
        "required": [
          "name",
          "mimeType",
          "role"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "SKILL.md"
          },
          "mimeType": {
            "type": "string",
            "example": "text/markdown"
          },
          "role": {
            "type": "string",
            "enum": [
              "skill-md",
              "skill-json",
              "file"
            ]
          },
          "topicId": {
            "type": "string",
            "nullable": true,
            "example": "0.0.5001002"
          },
          "hrl": {
            "type": "string",
            "nullable": true,
            "example": "hcs://1/0.0.5001002"
          },
          "packageSequenceNumber": {
            "type": "integer",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryQuoteRequest": {
        "type": "object",
        "required": [
          "files"
        ],
        "properties": {
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SkillRegistryFileInput"
            },
            "minItems": 1
          },
          "directoryTopicId": {
            "type": "string",
            "nullable": true,
            "example": "0.0.5000001"
          },
          "accountId": {
            "type": "string",
            "nullable": true,
            "example": "0.0.123456"
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryQuoteFileBreakdown": {
        "type": "object",
        "required": [
          "name",
          "mimeType",
          "estimatedCostHbar"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "mimeType": {
            "type": "string"
          },
          "estimatedCostHbar": {
            "type": "number",
            "minimum": 0
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryQuoteResponse": {
        "type": "object",
        "required": [
          "quoteId",
          "name",
          "version",
          "directoryTopicId",
          "estimatedCostHbar",
          "credits",
          "usdCents",
          "expiresAt",
          "files"
        ],
        "properties": {
          "quoteId": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "version": {
            "type": "string"
          },
          "directoryTopicId": {
            "type": "string"
          },
          "estimatedCostHbar": {
            "type": "number",
            "minimum": 0
          },
          "credits": {
            "type": "integer",
            "minimum": 1
          },
          "usdCents": {
            "type": "integer",
            "minimum": 1
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SkillRegistryQuoteFileBreakdown"
            }
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryPublishRequest": {
        "type": "object",
        "required": [
          "files"
        ],
        "properties": {
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SkillRegistryFileInput"
            },
            "minItems": 1
          },
          "directoryTopicId": {
            "type": "string",
            "nullable": true,
            "example": "0.0.5000001"
          },
          "accountId": {
            "type": "string",
            "nullable": true,
            "example": "0.0.123456"
          },
          "quoteId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryPublishJobResponse": {
        "type": "object",
        "required": [
          "jobId",
          "status",
          "network",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "jobId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "in_progress",
              "completed",
              "failed"
            ]
          },
          "credits": {
            "type": "integer",
            "nullable": true
          },
          "usdCents": {
            "type": "integer",
            "nullable": true
          },
          "quoteId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "network": {
            "type": "string",
            "enum": [
              "mainnet",
              "testnet"
            ]
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryJobStatusResponse": {
        "type": "object",
        "required": [
          "jobId",
          "status",
          "network",
          "name",
          "version",
          "directoryTopicId",
          "createdAt",
          "updatedAt"
        ],
        "properties": {
          "jobId": {
            "type": "string",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending",
              "in_progress",
              "completed",
              "failed"
            ]
          },
          "network": {
            "type": "string",
            "enum": [
              "mainnet",
              "testnet"
            ]
          },
          "name": {
            "type": "string"
          },
          "version": {
            "type": "string"
          },
          "directoryTopicId": {
            "type": "string"
          },
          "directorySequenceNumber": {
            "type": "integer",
            "nullable": true
          },
          "packageTopicId": {
            "type": "string",
            "nullable": true
          },
          "skillJsonHrl": {
            "type": "string",
            "nullable": true
          },
          "files": {
            "type": "array",
            "nullable": true,
            "items": {
              "$ref": "#/components/schemas/SkillRegistryFileDescriptor"
            }
          },
          "quoteCredits": {
            "type": "integer",
            "nullable": true
          },
          "quoteUsdCents": {
            "type": "integer",
            "nullable": true
          },
          "reservationId": {
            "type": "string",
            "nullable": true
          },
          "totalCostHbar": {
            "type": "number",
            "nullable": true
          },
          "totalCostCredits": {
            "type": "integer",
            "nullable": true
          },
          "failureReason": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryPublishSummary": {
        "type": "object",
        "required": [
          "jobId",
          "network",
          "name",
          "version",
          "createdAt",
          "directoryTopicId",
          "packageTopicId",
          "skillJsonHrl"
        ],
        "properties": {
          "jobId": {
            "type": "string",
            "format": "uuid"
          },
          "network": {
            "type": "string",
            "enum": [
              "mainnet",
              "testnet"
            ]
          },
          "name": {
            "type": "string"
          },
          "version": {
            "type": "string"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "directoryTopicId": {
            "type": "string"
          },
          "directorySequenceNumber": {
            "type": "integer",
            "nullable": true
          },
          "packageTopicId": {
            "type": "string"
          },
          "skillJsonHrl": {
            "type": "string"
          },
          "files": {
            "type": "array",
            "nullable": true,
            "items": {
              "$ref": "#/components/schemas/SkillRegistryFileDescriptor"
            }
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryListResponse": {
        "type": "object",
        "required": [
          "items",
          "nextCursor"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SkillRegistryPublishSummary"
            }
          },
          "nextCursor": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SkillRegistryConfigResponse": {
        "type": "object",
        "required": [
          "enabled"
        ],
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "directoryTopicId": {
            "type": "string",
            "nullable": true
          },
          "maxFiles": {
            "type": "integer",
            "nullable": true
          },
          "maxTotalSizeBytes": {
            "type": "integer",
            "nullable": true
          },
          "allowedMimeTypes": {
            "type": "array",
            "nullable": true,
            "items": {
              "type": "string"
            }
          },
          "network": {
            "type": "string",
            "nullable": true,
            "enum": [
              "mainnet",
              "testnet"
            ]
          }
        },
        "additionalProperties": false
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "Service readiness probes"
    },
    {
      "name": "Search",
      "description": "Agent discovery endpoints"
    },
    {
      "name": "Agents",
      "description": "Agent detail and related information"
    },
    {
      "name": "Registry",
      "description": "Platform level statistics and registries"
    },
    {
      "name": "Chat",
      "description": "Chat session management and messaging"
    },
    {
      "name": "Credits",
      "description": "Purchase and account credit management endpoints"
    },
    {
      "name": "Routing",
      "description": "Universal Agent Identifier (UAID) resolution and message routing"
    },
    {
      "name": "Registration",
      "description": "Agent self-registration, updates and lifecycle management"
    },
    {
      "name": "Federation",
      "description": "Cross-registry discovery and synchronization"
    },
    {
      "name": "Encryption",
      "description": "Encryption key registration and status endpoints"
    },
    {
      "name": "Content",
      "description": "Content inscription using registry credits"
    }
  ]
}